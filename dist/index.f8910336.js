const{createContext:qe,useContext:Te,useRef:X,useLayoutEffect:be,useState:Q}=React;var ue={},Se=ReactDOM;ue.createRoot=Se.createRoot,ue.hydrateRoot=Se.hydrateRoot;const Fe={every:[],words:[],spaces:[]},de=qe(Fe);var ie={exports:{}},oe={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ue=React,Xe=Symbol.for("react.element"),Qe=Symbol.for("react.fragment"),Ve=Object.prototype.hasOwnProperty,He=Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,je={key:!0,ref:!0,__self:!0,__source:!0};function Be(r,t,e){var n,i={},o=null,s=null;e!==void 0&&(o=""+e),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)Ve.call(t,n)&&!je.hasOwnProperty(n)&&(i[n]=t[n]);if(r&&r.defaultProps)for(n in t=r.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:Xe,type:r,key:o,ref:s,props:i,_owner:He.current}}oe.Fragment=Qe;oe.jsx=Be;oe.jsxs=Be;(function(r){r.exports=oe})(ie);const Je=ie.exports.Fragment,x=ie.exports.jsx,O=ie.exports.jsxs,Ze=()=>{const{every:r,spaces:t}=Te(de);return x("span",{className:"cloud-element space",ref:e=>{e&&(!r.includes(e)&&r.push(e),!t.includes(e)&&t.push(e))},children:" "})},Z=({children:r,idle:t=!1})=>{const{every:e,words:n}=Te(de);return x("span",{className:"cloud-element word",ref:i=>{i&&(i.idle=t,!e.includes(i)&&e.push(i),!n.includes(i)&&n.push(i))},children:r})},Ke=r=>(t,e)=>t.match(/\n/g)?x("br",{},`${e}-break`):t===" "?x(Ze,{},`${e}-space`):r==="WORD"?x(Z,{idle:!1,children:t},`${e}-${t}`):r==="SPACE"?x(Z,{idle:!0,children:t},`${e}-${t}`):t.match(/^\$\{[^\$\{]+\}$/g)?x(Z,{idle:!1,children:t.replace(/(^\$\{)|(\}$)/g,"")},`${e}-${t}`):x(Z,{idle:!0,children:t},`${e}-${t}`),ke=(r,t)=>r.split(t==="PARTIAL"?/(\$\{[^\$\{]+\}|\s)/:/(\s)/).filter(Boolean),et=(r,t,e,n,i,o)=>{const s=window.devicePixelRatio;(()=>o.reduce((f,c)=>c[0][0][0]<f?c[0][0][0]:f,t))(),r.strokeStyle="#f74",r.lineWidth=1;const l=o[0][0][2][1]-o[0][0][0][1],u=l/i,h=(f,c)=>{if(n==="left"||n==="center")for(let y=0;y<=t;y+=u)f(y,c);else if(n==="right")for(let y=t;y>=0;y-=u)f(y,c)},v=(f,c)=>{r.moveTo(f*s,c*l*s),r.lineTo(f*s,(c+1)*l*s)};r.beginPath();for(let f=0;f<e/l;f++)h(v,f);r.stroke(),r.strokeStyle="#f40",o.forEach(f=>{r.beginPath(),f[0].forEach(([c,y],g)=>{g?r.lineTo(c*s,y*s):r.moveTo(c*s,y*s)}),r.closePath(),r.stroke()})};/**
 * splaytree v3.1.1
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function tt(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(h){return l([u,h])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(r,e)}catch(h){u=[6,h],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Y=function(){function r(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null}return r}();function nt(r,t){return r>t?1:r<t?-1:0}function W(r,t,e){for(var n=new Y(null,null),i=n,o=n;;){var s=e(r,t.key);if(s<0){if(t.left===null)break;if(e(r,t.left.key)<0){var a=t.left;if(t.left=a.right,a.right=t,t=a,t.left===null)break}o.left=t,o=t,t=t.left}else if(s>0){if(t.right===null)break;if(e(r,t.right.key)>0){var a=t.right;if(t.right=a.left,a.left=t,t=a,t.right===null)break}i.right=t,i=t,t=t.right}else break}return i.right=t.left,o.left=t.right,t.left=n.right,t.right=n.left,t}function le(r,t,e,n){var i=new Y(r,t);if(e===null)return i.left=i.right=null,i;e=W(r,e,n);var o=n(r,e.key);return o<0?(i.left=e.left,i.right=e,e.left=null):o>=0&&(i.right=e.right,i.left=e,e.right=null),i}function Re(r,t,e){var n=null,i=null;if(t){t=W(r,t,e);var o=e(t.key,r);o===0?(n=t.left,i=t.right):o<0?(i=t.right,t.right=null,n=t):(n=t.left,t.left=null,i=t)}return{left:n,right:i}}function rt(r,t,e){return t===null?r:(r===null||(t=W(r.key,t,e),t.left=r),t)}function he(r,t,e,n,i){if(r){n(""+t+(e?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+i(r)+`
`);var o=t+(e?"    ":"\u2502   ");r.left&&he(r.left,o,!1,n,i),r.right&&he(r.right,o,!0,n,i)}}var pe=function(){function r(t){t===void 0&&(t=nt),this._root=null,this._size=0,this._comparator=t}return r.prototype.insert=function(t,e){return this._size++,this._root=le(t,e,this._root,this._comparator)},r.prototype.add=function(t,e){var n=new Y(t,e);this._root===null&&(n.left=n.right=null,this._size++,this._root=n);var i=this._comparator,o=W(t,this._root,i),s=i(t,o.key);return s===0?this._root=o:(s<0?(n.left=o.left,n.right=o,o.left=null):s>0&&(n.right=o.right,n.left=o,o.right=null),this._size++,this._root=n),this._root},r.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},r.prototype._remove=function(t,e,n){var i;if(e===null)return null;e=W(t,e,n);var o=n(t,e.key);return o===0?(e.left===null?i=e.right:(i=W(t,e.left,n),i.right=e.right),this._size--,i):e},r.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=W(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},r.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var i=n(t,e.key);if(i===0)return e;i<0?e=e.left:e=e.right}return null},r.prototype.find=function(t){return this._root&&(this._root=W(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},r.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var i=n(t,e.key);if(i===0)return!0;i<0?e=e.left:e=e.right}return!1},r.prototype.forEach=function(t,e){for(var n=this._root,i=[],o=!1;!o;)n!==null?(i.push(n),n=n.left):i.length!==0?(n=i.pop(),t.call(e,n),n=n.right):o=!0;return this},r.prototype.range=function(t,e,n,i){for(var o=[],s=this._comparator,a=this._root,l;o.length!==0||a;)if(a)o.push(a),a=a.left;else{if(a=o.pop(),l=s(a.key,e),l>0)break;if(s(a.key,t)>=0&&n.call(i,a))return this;a=a.right}return this},r.prototype.keys=function(){var t=[];return this.forEach(function(e){var n=e.key;return t.push(n)}),t},r.prototype.values=function(){var t=[];return this.forEach(function(e){var n=e.data;return t.push(n)}),t},r.prototype.min=function(){return this._root?this.minNode(this._root).key:null},r.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},r.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},r.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},r.prototype.at=function(t){for(var e=this._root,n=!1,i=0,o=[];!n;)if(e)o.push(e),e=e.left;else if(o.length>0){if(e=o.pop(),i===t)return e;i++,e=e.right}else n=!0;return null},r.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var i=this._comparator;e;){var o=i(t.key,e.key);if(o===0)break;o<0?(n=e,e=e.left):e=e.right}return n},r.prototype.prev=function(t){var e=this._root,n=null;if(t.left!==null){for(n=t.left;n.right;)n=n.right;return n}for(var i=this._comparator;e;){var o=i(t.key,e.key);if(o===0)break;o<0?e=e.left:(n=e,e=e.right)}return n},r.prototype.clear=function(){return this._root=null,this._size=0,this},r.prototype.toList=function(){return ot(this._root)},r.prototype.load=function(t,e,n){e===void 0&&(e=[]),n===void 0&&(n=!1);var i=t.length,o=this._comparator;if(n&&ve(t,e,0,i-1,o),this._root===null)this._root=fe(t,e,0,i),this._size=i;else{var s=st(this.toList(),it(t,e),o);i=this._size+i,this._root=ce({head:s},0,i)}return this},r.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(r.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),r.prototype.toString=function(t){t===void 0&&(t=function(n){return String(n.key)});var e=[];return he(this._root,"",!0,function(n){return e.push(n)},t),e.join("")},r.prototype.update=function(t,e,n){var i=this._comparator,o=Re(t,this._root,i),s=o.left,a=o.right;i(t,e)<0?a=le(e,n,a,i):s=le(e,n,s,i),this._root=rt(s,a,i)},r.prototype.split=function(t){return Re(t,this._root,this._comparator)},r.prototype[Symbol.iterator]=function(){var t;return tt(this,function(e){switch(e.label){case 0:t=this.minNode(),e.label=1;case 1:return t?[4,t]:[3,3];case 2:return e.sent(),t=this.next(t),[3,1];case 3:return[2]}})},r}();function fe(r,t,e,n){var i=n-e;if(i>0){var o=e+Math.floor(i/2),s=r[o],a=t[o],l=new Y(s,a);return l.left=fe(r,t,e,o),l.right=fe(r,t,o+1,n),l}return null}function it(r,t){for(var e=new Y(null,null),n=e,i=0;i<r.length;i++)n=n.next=new Y(r[i],t[i]);return n.next=null,e.next}function ot(r){for(var t=r,e=[],n=!1,i=new Y(null,null),o=i;!n;)t?(e.push(t),t=t.left):e.length>0?(t=o=o.next=e.pop(),t=t.right):n=!0;return o.next=null,i.next}function ce(r,t,e){var n=e-t;if(n>0){var i=t+Math.floor(n/2),o=ce(r,t,i),s=r.head;return s.left=o,r.head=r.head.next,s.right=ce(r,i+1,e),s}return null}function st(r,t,e){for(var n=new Y(null,null),i=n,o=r,s=t;o!==null&&s!==null;)e(o.key,s.key)<0?(i.next=o,o=o.next):(i.next=s,s=s.next),i=i.next;return o!==null?i.next=o:s!==null&&(i.next=s),n.next}function ve(r,t,e,n,i){if(!(e>=n)){for(var o=r[e+n>>1],s=e-1,a=n+1;;){do s++;while(i(r[s],o)<0);do a--;while(i(r[a],o)>0);if(s>=a)break;var l=r[s];r[s]=r[a],r[a]=l,l=t[s],t[s]=t[a],t[a]=l}ve(r,t,e,a,i),ve(r,t,a+1,n,i)}}function A(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Pe(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function M(r,t,e){return t&&Pe(r.prototype,t),e&&Pe(r,e),r}var H=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},ge=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,i=t.ur.x<e.ur.x?t.ur.x:e.ur.x,o=t.ll.y<e.ll.y?e.ll.y:t.ll.y,s=t.ur.y<e.ur.y?t.ur.y:e.ur.y;return{ll:{x:n,y:o},ur:{x:i,y:s}}},D=Number.EPSILON;D===void 0&&(D=Math.pow(2,-52));var lt=D*D,ye=function(t,e){if(-D<t&&t<D&&-D<e&&e<D)return 0;var n=t-e;return n*n<lt*t*e?0:t<e?-1:1},at=function(){function r(){A(this,r),this.reset()}return M(r,[{key:"reset",value:function(){this.xRounder=new _e,this.yRounder=new _e}},{key:"round",value:function(e,n){return{x:this.xRounder.round(e),y:this.yRounder.round(n)}}}]),r}(),_e=function(){function r(){A(this,r),this.tree=new pe,this.round(0)}return M(r,[{key:"round",value:function(e){var n=this.tree.add(e),i=this.tree.prev(n);if(i!==null&&ye(n.key,i.key)===0)return this.tree.remove(e),i.key;var o=this.tree.next(n);return o!==null&&ye(n.key,o.key)===0?(this.tree.remove(e),o.key):e}}]),r}(),J=new at,j=function(t,e){return t.x*e.y-t.y*e.x},ze=function(t,e){return t.x*e.x+t.y*e.y},Ie=function(t,e,n){var i={x:e.x-t.x,y:e.y-t.y},o={x:n.x-t.x,y:n.y-t.y},s=j(i,o);return ye(s,0)},te=function(t){return Math.sqrt(ze(t,t))},ut=function(t,e,n){var i={x:e.x-t.x,y:e.y-t.y},o={x:n.x-t.x,y:n.y-t.y};return j(o,i)/te(o)/te(i)},ht=function(t,e,n){var i={x:e.x-t.x,y:e.y-t.y},o={x:n.x-t.x,y:n.y-t.y};return ze(o,i)/te(o)/te(i)},Oe=function(t,e,n){return e.y===0?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},Me=function(t,e,n){return e.x===0?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},ft=function(t,e,n,i){if(e.x===0)return Me(n,i,t.x);if(i.x===0)return Me(t,e,n.x);if(e.y===0)return Oe(n,i,t.y);if(i.y===0)return Oe(t,e,n.y);var o=j(e,i);if(o==0)return null;var s={x:n.x-t.x,y:n.y-t.y},a=j(s,e)/o,l=j(s,i)/o,u=t.x+l*e.x,h=n.x+a*i.x,v=t.y+l*e.y,f=n.y+a*i.y,c=(u+h)/2,y=(v+f)/2;return{x:c,y}},T=function(){M(r,null,[{key:"compare",value:function(e,n){var i=r.comparePoints(e.point,n.point);return i!==0?i:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:ne.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(e,n){return e.x<n.x?-1:e.x>n.x?1:e.y<n.y?-1:e.y>n.y?1:0}}]);function r(t,e){A(this,r),t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=e}return M(r,[{key:"link",value:function(e){if(e.point===this.point)throw new Error("Tried to link already linked events");for(var n=e.point.events,i=0,o=n.length;i<o;i++){var s=n[i];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var e=this.point.events.length,n=0;n<e;n++){var i=this.point.events[n];if(i.segment.consumedBy===void 0)for(var o=n+1;o<e;o++){var s=this.point.events[o];s.consumedBy===void 0&&i.otherSE.point.events===s.otherSE.point.events&&i.segment.consume(s.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var e=[],n=0,i=this.point.events.length;n<i;n++){var o=this.point.events[n];o!==this&&!o.segment.ringOut&&o.segment.isInResult()&&e.push(o)}return e}},{key:"getLeftmostComparator",value:function(e){var n=this,i=new Map,o=function(a){var l=a.otherSE;i.set(a,{sine:ut(n.point,e.point,l.point),cosine:ht(n.point,e.point,l.point)})};return function(s,a){i.has(s)||o(s),i.has(a)||o(a);var l=i.get(s),u=l.sine,h=l.cosine,v=i.get(a),f=v.sine,c=v.cosine;return u>=0&&f>=0?h<c?1:h>c?-1:0:u<0&&f<0?h<c?-1:h>c?1:0:f<u?-1:f>u?1:0}}}]),r}(),ct=0,ne=function(){M(r,null,[{key:"compare",value:function(e,n){var i=e.leftSE.point.x,o=n.leftSE.point.x,s=e.rightSE.point.x,a=n.rightSE.point.x;if(a<i)return 1;if(s<o)return-1;var l=e.leftSE.point.y,u=n.leftSE.point.y,h=e.rightSE.point.y,v=n.rightSE.point.y;if(i<o){if(u<l&&u<h)return 1;if(u>l&&u>h)return-1;var f=e.comparePoint(n.leftSE.point);if(f<0)return 1;if(f>0)return-1;var c=n.comparePoint(e.rightSE.point);return c!==0?c:-1}if(i>o){if(l<u&&l<v)return-1;if(l>u&&l>v)return 1;var y=n.comparePoint(e.leftSE.point);if(y!==0)return y;var g=e.comparePoint(n.rightSE.point);return g<0?1:g>0?-1:1}if(l<u)return-1;if(l>u)return 1;if(s<a){var d=n.comparePoint(e.rightSE.point);if(d!==0)return d}if(s>a){var S=e.comparePoint(n.rightSE.point);if(S<0)return 1;if(S>0)return-1}if(s!==a){var R=h-l,E=s-i,p=v-u,m=a-o;if(R>E&&p<m)return 1;if(R<E&&p>m)return-1}return s>a?1:s<a||h<v?-1:h>v?1:e.id<n.id?-1:e.id>n.id?1:0}}]);function r(t,e,n,i){A(this,r),this.id=++ct,this.leftSE=t,t.segment=this,t.otherSE=e,this.rightSE=e,e.segment=this,e.otherSE=t,this.rings=n,this.windings=i}return M(r,[{key:"replaceRightSE",value:function(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var e=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e<n?e:n},ur:{x:this.rightSE.point.x,y:e>n?e:n}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(e){return e.x===this.leftSE.point.x&&e.y===this.leftSE.point.y||e.x===this.rightSE.point.x&&e.y===this.rightSE.point.y}},{key:"comparePoint",value:function(e){if(this.isAnEndpoint(e))return 0;var n=this.leftSE.point,i=this.rightSE.point,o=this.vector();if(n.x===i.x)return e.x===n.x?0:e.x<n.x?1:-1;var s=(e.y-n.y)/o.y,a=n.x+s*o.x;if(e.x===a)return 0;var l=(e.x-n.x)/o.x,u=n.y+l*o.y;return e.y===u?0:e.y<u?-1:1}},{key:"getIntersection",value:function(e){var n=this.bbox(),i=e.bbox(),o=ge(n,i);if(o===null)return null;var s=this.leftSE.point,a=this.rightSE.point,l=e.leftSE.point,u=e.rightSE.point,h=H(n,l)&&this.comparePoint(l)===0,v=H(i,s)&&e.comparePoint(s)===0,f=H(n,u)&&this.comparePoint(u)===0,c=H(i,a)&&e.comparePoint(a)===0;if(v&&h)return c&&!f?a:!c&&f?u:null;if(v)return f&&s.x===u.x&&s.y===u.y?null:s;if(h)return c&&a.x===l.x&&a.y===l.y?null:l;if(c&&f)return null;if(c)return a;if(f)return u;var y=ft(s,this.vector(),l,e.vector());return y===null||!H(o,y)?null:J.round(y.x,y.y)}},{key:"split",value:function(e){var n=[],i=e.events!==void 0,o=new T(e,!0),s=new T(e,!1),a=this.rightSE;this.replaceRightSE(s),n.push(s),n.push(o);var l=new r(o,a,this.rings.slice(),this.windings.slice());return T.comparePoints(l.leftSE.point,l.rightSE.point)>0&&l.swapEvents(),T.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(o.checkForConsuming(),s.checkForConsuming()),n}},{key:"swapEvents",value:function(){var e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var n=0,i=this.windings.length;n<i;n++)this.windings[n]*=-1}},{key:"consume",value:function(e){for(var n=this,i=e;n.consumedBy;)n=n.consumedBy;for(;i.consumedBy;)i=i.consumedBy;var o=r.compare(n,i);if(o!==0){if(o>0){var s=n;n=i,i=s}if(n.prev===i){var a=n;n=i,i=a}for(var l=0,u=i.rings.length;l<u;l++){var h=i.rings[l],v=i.windings[l],f=n.rings.indexOf(h);f===-1?(n.rings.push(h),n.windings.push(v)):n.windings[f]+=v}i.rings=null,i.windings=null,i.consumedBy=n,i.leftSE.consumedBy=n.leftSE,i.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};for(var n=this._afterState.rings,i=this._afterState.windings,o=this._afterState.multiPolys,s=0,a=this.rings.length;s<a;s++){var l=this.rings[s],u=this.windings[s],h=n.indexOf(l);h===-1?(n.push(l),i.push(u)):i[h]+=u}for(var v=[],f=[],c=0,y=n.length;c<y;c++)if(i[c]!==0){var g=n[c],d=g.poly;if(f.indexOf(d)===-1)if(g.isExterior)v.push(d);else{f.indexOf(d)===-1&&f.push(d);var S=v.indexOf(g.poly);S!==-1&&v.splice(S,1)}}for(var R=0,E=v.length;R<E;R++){var p=v[R].multiPoly;o.indexOf(p)===-1&&o.push(p)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var e=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(C.type){case"union":{var i=e.length===0,o=n.length===0;this._isInResult=i!==o;break}case"intersection":{var s,a;e.length<n.length?(s=e.length,a=n.length):(s=n.length,a=e.length),this._isInResult=a===C.numMultiPolys&&s<a;break}case"xor":{var l=Math.abs(e.length-n.length);this._isInResult=l%2===1;break}case"difference":{var u=function(v){return v.length===1&&v[0].isSubject};this._isInResult=u(e)!==u(n);break}default:throw new Error("Unrecognized operation type found ".concat(C.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,i){var o,s,a,l=T.comparePoints(e,n);if(l<0)o=e,s=n,a=1;else if(l>0)o=n,s=e,a=-1;else throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));var u=new T(o,!0),h=new T(s,!1);return new r(u,h,[i],[a])}}]),r}(),Ne=function(){function r(t,e,n){if(A(this,r),!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=n,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=J.round(t[0][0],t[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,s=1,a=t.length;s<a;s++){if(typeof t[s][0]!="number"||typeof t[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var l=J.round(t[s][0],t[s][1]);l.x===o.x&&l.y===o.y||(this.segments.push(ne.fromRing(o,l,this)),l.x<this.bbox.ll.x&&(this.bbox.ll.x=l.x),l.y<this.bbox.ll.y&&(this.bbox.ll.y=l.y),l.x>this.bbox.ur.x&&(this.bbox.ur.x=l.x),l.y>this.bbox.ur.y&&(this.bbox.ur.y=l.y),o=l)}(i.x!==o.x||i.y!==o.y)&&this.segments.push(ne.fromRing(o,i,this))}return M(r,[{key:"getSweepEvents",value:function(){for(var e=[],n=0,i=this.segments.length;n<i;n++){var o=this.segments[n];e.push(o.leftSE),e.push(o.rightSE)}return e}}]),r}(),vt=function(){function r(t,e){if(A(this,r),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Ne(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var n=1,i=t.length;n<i;n++){var o=new Ne(t[n],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=e}return M(r,[{key:"getSweepEvents",value:function(){for(var e=this.exteriorRing.getSweepEvents(),n=0,i=this.interiorRings.length;n<i;n++)for(var o=this.interiorRings[n].getSweepEvents(),s=0,a=o.length;s<a;s++)e.push(o[s]);return e}}]),r}(),Ae=function(){function r(t,e){if(A(this,r),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var n=0,i=t.length;n<i;n++){var o=new vt(t[n],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=e}return M(r,[{key:"getSweepEvents",value:function(){for(var e=[],n=0,i=this.polys.length;n<i;n++)for(var o=this.polys[n].getSweepEvents(),s=0,a=o.length;s<a;s++)e.push(o[s]);return e}}]),r}(),gt=function(){M(r,null,[{key:"factory",value:function(e){for(var n=[],i=0,o=e.length;i<o;i++){var s=e[i];if(!(!s.isInResult()||s.ringOut)){for(var a=null,l=s.leftSE,u=s.rightSE,h=[l],v=l.point,f=[];a=l,l=u,h.push(l),l.point!==v;)for(;;){var c=l.getAvailableLinkedEvents();if(c.length===0){var y=h[0].point,g=h[h.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(y.x,",")+" ".concat(y.y,"]. Last matching segment found ends at")+" [".concat(g.x,", ").concat(g.y,"]."))}if(c.length===1){u=c[0].otherSE;break}for(var d=null,S=0,R=f.length;S<R;S++)if(f[S].point===l.point){d=S;break}if(d!==null){var E=f.splice(d)[0],p=h.splice(E.index);p.unshift(p[0].otherSE),n.push(new r(p.reverse()));continue}f.push({index:h.length,point:l.point});var m=l.getLeftmostComparator(a);u=c.sort(m)[0].otherSE;break}n.push(new r(h))}}return n}}]);function r(t){A(this,r),this.events=t;for(var e=0,n=t.length;e<n;e++)t[e].segment.ringOut=this;this.poly=null}return M(r,[{key:"getGeom",value:function(){for(var e=this.events[0].point,n=[e],i=1,o=this.events.length-1;i<o;i++){var s=this.events[i].point,a=this.events[i+1].point;Ie(s,e,a)!==0&&(n.push(s),e=s)}if(n.length===1)return null;var l=n[0],u=n[1];Ie(l,e,u)===0&&n.shift(),n.push(n[0]);for(var h=this.isExteriorRing()?1:-1,v=this.isExteriorRing()?0:n.length-1,f=this.isExteriorRing()?n.length:-1,c=[],y=v;y!=f;y+=h)c.push([n[y].x,n[y].y]);return c}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var e=this.events[0],n=1,i=this.events.length;n<i;n++){var o=this.events[n];T.compare(e,o)>0&&(e=o)}for(var s=e.segment.prevInResult(),a=s?s.prevInResult():null;;){if(!s)return null;if(!a)return s.ringOut;if(a.ringOut!==s.ringOut)return a.ringOut.enclosingRing()!==s.ringOut?s.ringOut:s.ringOut.enclosingRing();s=a.prevInResult(),a=s?s.prevInResult():null}}}]),r}(),Ce=function(){function r(t){A(this,r),this.exteriorRing=t,t.poly=this,this.interiorRings=[]}return M(r,[{key:"addInterior",value:function(e){this.interiorRings.push(e),e.poly=this}},{key:"getGeom",value:function(){var e=[this.exteriorRing.getGeom()];if(e[0]===null)return null;for(var n=0,i=this.interiorRings.length;n<i;n++){var o=this.interiorRings[n].getGeom();o!==null&&e.push(o)}return e}}]),r}(),yt=function(){function r(t){A(this,r),this.rings=t,this.polys=this._composePolys(t)}return M(r,[{key:"getGeom",value:function(){for(var e=[],n=0,i=this.polys.length;n<i;n++){var o=this.polys[n].getGeom();o!==null&&e.push(o)}return e}},{key:"_composePolys",value:function(e){for(var n=[],i=0,o=e.length;i<o;i++){var s=e[i];if(!s.poly)if(s.isExteriorRing())n.push(new Ce(s));else{var a=s.enclosingRing();a.poly||n.push(new Ce(a)),a.poly.addInterior(s)}}return n}}]),r}(),dt=function(){function r(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ne.compare;A(this,r),this.queue=t,this.tree=new pe(e),this.segments=[]}return M(r,[{key:"process",value:function(e){var n=e.segment,i=[];if(e.consumedBy)return e.isLeft?this.queue.remove(e.otherSE):this.tree.remove(n),i;var o=e.isLeft?this.tree.insert(n):this.tree.find(n);if(!o)throw new Error("Unable to find segment #".concat(n.id," ")+"[".concat(n.leftSE.point.x,", ").concat(n.leftSE.point.y,"] -> ")+"[".concat(n.rightSE.point.x,", ").concat(n.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var s=o,a=o,l=void 0,u=void 0;l===void 0;)s=this.tree.prev(s),s===null?l=null:s.key.consumedBy===void 0&&(l=s.key);for(;u===void 0;)a=this.tree.next(a),a===null?u=null:a.key.consumedBy===void 0&&(u=a.key);if(e.isLeft){var h=null;if(l){var v=l.getIntersection(n);if(v!==null&&(n.isAnEndpoint(v)||(h=v),!l.isAnEndpoint(v)))for(var f=this._splitSafely(l,v),c=0,y=f.length;c<y;c++)i.push(f[c])}var g=null;if(u){var d=u.getIntersection(n);if(d!==null&&(n.isAnEndpoint(d)||(g=d),!u.isAnEndpoint(d)))for(var S=this._splitSafely(u,d),R=0,E=S.length;R<E;R++)i.push(S[R])}if(h!==null||g!==null){var p=null;if(h===null)p=g;else if(g===null)p=h;else{var m=T.comparePoints(h,g);p=m<=0?h:g}this.queue.remove(n.rightSE),i.push(n.rightSE);for(var q=n.split(p),L=0,N=q.length;L<N;L++)i.push(q[L])}i.length>0?(this.tree.remove(n),i.push(e)):(this.segments.push(n),n.prev=l)}else{if(l&&u){var I=l.getIntersection(u);if(I!==null){if(!l.isAnEndpoint(I))for(var B=this._splitSafely(l,I),$=0,z=B.length;$<z;$++)i.push(B[$]);if(!u.isAnEndpoint(I))for(var F=this._splitSafely(u,I),b=0,w=F.length;b<w;b++)i.push(F[b])}}this.tree.remove(n)}return i}},{key:"_splitSafely",value:function(e,n){this.tree.remove(e);var i=e.rightSE;this.queue.remove(i);var o=e.split(n);return o.push(i),e.consumedBy===void 0&&this.tree.insert(e),o}}]),r}(),Le=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,pt=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,xt=function(){function r(){A(this,r)}return M(r,[{key:"run",value:function(e,n,i){C.type=e,J.reset();for(var o=[new Ae(n,!0)],s=0,a=i.length;s<a;s++)o.push(new Ae(i[s],!1));if(C.numMultiPolys=o.length,C.type==="difference")for(var l=o[0],u=1;u<o.length;)ge(o[u].bbox,l.bbox)!==null?u++:o.splice(u,1);if(C.type==="intersection"){for(var h=0,v=o.length;h<v;h++)for(var f=o[h],c=h+1,y=o.length;c<y;c++)if(ge(f.bbox,o[c].bbox)===null)return[]}for(var g=new pe(T.compare),d=0,S=o.length;d<S;d++)for(var R=o[d].getSweepEvents(),E=0,p=R.length;E<p;E++)if(g.insert(R[E]),g.size>Le)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var m=new dt(g),q=g.size,L=g.pop();L;){var N=L.key;if(g.size===q){var I=N.segment;throw new Error("Unable to pop() ".concat(N.isLeft?"left":"right"," SweepEvent ")+"[".concat(N.point.x,", ").concat(N.point.y,"] from segment #").concat(I.id," ")+"[".concat(I.leftSE.point.x,", ").concat(I.leftSE.point.y,"] -> ")+"[".concat(I.rightSE.point.x,", ").concat(I.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(g.size>Le)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(m.segments.length>pt)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var B=m.process(N),$=0,z=B.length;$<z;$++){var F=B[$];F.consumedBy===void 0&&g.insert(F)}q=g.size,L=g.pop()}J.reset();var b=gt.factory(m.segments),w=new yt(b);return w.getGeom()}}]),r}(),C=new xt,mt=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return C.run("union",t,n)},Et=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return C.run("intersection",t,n)},wt=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return C.run("xor",t,n)},bt=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return C.run("difference",t,n)},St={union:mt,intersection:Et,xor:wt,difference:bt};const ee=r=>Math.round(r*1e10)/1e10,ae=(r,t)=>ee(Math.sqrt((t.x-r.x)*(t.x-r.x)+(t.y-r.y)*(t.y-r.y))),re=Math.PI,kt=re*2,Rt=(r,t)=>{const e=t-r;return e>re&&e<kt||e<0&&e>-re?-1:1},Pt=(r,t,e,n,i,o)=>{const s=Math.atan2(r.y-t.y,r.x-t.x),a=Math.atan2(e.y-t.y,e.x-t.x),l=Math.acos((n*n+o*o-i*i)/(2*n*o)),u=1/Math.tan(l/2),h=Rt(s,a),v=s+h*l/2;return{prev:s,next:a,main:l,vel:u,dir:h,bis:v}},_t=(r,t=0)=>{const e=r.length,n=[],i=[],o=[];r.forEach((l,u)=>{const h=r[(u-1+e)%e],v=r[(u+1)%e],f=ae(h,l),c=ae(h,v),y=ae(l,v),g=Pt(h,l,v,f,c,y);g.main===0&&(g.main=Number.EPSILON,g.vel=Number.MAX_SAFE_INTEGER),g.main===re&&(g.vel=0);const d={x:l.x,y:l.y,angle:g,offset:0,arc:{radius:t,hit:t,lim:Math.min(y/g.vel,f/g.vel,l.r||0)},in:{length:f,rest:f},out:{length:y,rest:y},locked:!1,id:u,get prev(){return n[(u-1+e)%e]},get next(){return n[(u+1)%e]}};isNaN(g.main)&&(g.main=0,g.bis=g.prev||g.next,o.push(d)),typeof l.r=="number"&&(l.r===0?o.push(d):i.push(d)),n.push(d)}),o.forEach(l=>{l.angle.vel=0,l.arc.radius=0,xe(l)}),n.forEach(l=>{l.arc.hit=Math.min(l.out.rest/(l.angle.vel+l.next.angle.vel),l.in.rest/(l.angle.vel+l.prev.angle.vel))});let s=K(i);for(;s;)It(s),s=K(i);for(s=K(n);s;)Ot(s,t),s=K(n);const a=n.map(l=>{const u=l.arc.radius/Math.sin(l.angle.main/2);return{id:l.id,x:l.x,y:l.y,angle:{main:ee(l.angle.main),prev:l.angle.prev,next:l.angle.next,bis:l.angle.bis,dir:l.angle.dir},offset:ee(l.offset),arc:{radius:ee(l.arc.radius),x:l.x+(Math.cos(l.angle.bis)*u||0),y:l.y+(Math.sin(l.angle.bis)*u||0)},in:{length:l.in.length,x:l.x+Math.cos(l.angle.prev)*l.offset,y:l.y+Math.sin(l.angle.prev)*l.offset},out:{length:l.out.length,x:l.x+Math.cos(l.angle.next)*l.offset,y:l.y+Math.sin(l.angle.next)*l.offset},get prev(){return a[(l.id-1+e)%e]},get next(){return a[(l.id+1)%e]}}});return a},It=r=>{const{prev:t,next:e}=r;t.locked&&!e.locked?r.arc.radius=Math.min(Math.max((r.out.length-e.arc.lim*e.angle.vel)/r.angle.vel,r.out.length/(r.angle.vel+e.angle.vel)),r.in.rest/r.angle.vel,r.arc.lim):e.locked&&!t.locked?r.arc.radius=Math.min(Math.max((r.in.length-t.arc.lim*t.angle.vel)/r.angle.vel,r.in.length/(r.angle.vel+t.angle.vel)),r.out.rest/r.angle.vel,r.arc.lim):e.locked&&t.locked?r.arc.radius=Math.min(r.in.rest/r.angle.vel,r.out.rest/r.angle.vel,r.arc.lim):r.arc.radius=Math.min(Math.max((r.in.length-t.arc.lim*t.angle.vel)/r.angle.vel,r.in.length/(r.angle.vel+t.angle.vel)),Math.max((r.out.length-e.arc.lim*e.angle.vel)/r.angle.vel,r.out.length/(r.angle.vel+e.angle.vel)),r.arc.lim),xe(r)},Ot=(r,t)=>{if(t>r.arc.hit){const{prev:e,next:n}=r;e.locked&&!n.locked?r.arc.radius=Math.max(Math.min(r.in.rest/r.angle.vel,r.out.length/(r.angle.vel+n.angle.vel),r.arc.radius),0):n.locked&&!e.locked?r.arc.radius=Math.max(Math.min(r.out.rest/r.angle.vel,r.in.length/(r.angle.vel+e.angle.vel),r.arc.radius),0):n.locked&&e.locked?r.arc.radius=Math.max(Math.min(r.in.rest/r.angle.vel,r.out.rest/r.angle.vel,r.arc.radius),0):r.arc.radius=r.arc.hit}xe(r)},xe=r=>{const{prev:t,next:e}=r;r.offset=r.arc.radius*r.angle.vel,t.out.rest-=r.offset,r.in.rest-=r.offset,r.out.rest-=r.offset,e.in.rest-=r.offset,r.locked=!0,t.arc.hit=Math.min(t.in.length/(t.angle.vel+t.prev.angle.vel),t.in.rest/t.angle.vel,t.out.rest/t.angle.vel),e.arc.hit=Math.min(e.out.length/(e.angle.vel+e.next.angle.vel),e.out.rest/e.angle.vel,e.in.rest/e.angle.vel)},K=r=>r.reduce((t,e)=>e.locked?t:t?e.arc.hit<t.arc.hit?e:t:e,null);const Mt=({children:r,width:t,spaceWidth:e,cloudHeight:n,align:i="left",mode:o="WORD",snap:s=0,grid:a=!1,fill:l="White",stroke:u="DodgerBlue",strokeWidth:h=2})=>{const v=X(null),f=X([]),c=X([]),y=X([]),g=X(r),d=s?n/s:1;g.current!==r&&(f.current.length=0,c.current.length=0,y.current.length=0,g.current=r);const S=X(null),R=X(null),E=h,p=5,m=-3,q=u;be(()=>{R.current=S.current.getContext("2d")},[]),be(()=>{if(c.current.forEach(P=>P.style.width=""),f.current.forEach(P=>P.style.left=""),s&&(c.current.forEach(P=>{let{width:_}=P.getBoundingClientRect();_=Math.ceil(_/d)*d,P.style.width=`${_}px`}),i==="center")){const{top:P,left:_}=v.current.getBoundingClientRect();let k=NaN,U=NaN;f.current.forEach(V=>{let{x:we,y:se}=V.getBoundingClientRect();we-=_,se-=P,se!==k&&(k=se,U=-(we%d/d)*d),V.style.left=`${U}px`})}const{height:N,top:I,left:B}=v.current.getBoundingClientRect(),z=(o==="WORD"||o==="PARTIAL"?c.current.filter(P=>!P.idle):y.current).map(P=>{let{x:_,y:k,width:U,height:V}=P.getBoundingClientRect();return _-=B,k-=I,[[[_,k],[_+U,k],[_+U,k+V],[_,k+V]]]}),F=z.length?St.union(...z).map(P=>P.map(_=>(_.pop(),_.map(k=>({x:k[0],y:k[1]}))))).map(P=>P.map(_=>_t(_,n/(s===1?2:4)))):[],b=window.devicePixelRatio,w=R.current,G=S.current,me=t+(Math.abs(m)>E/2?Math.abs(m)+E/2:E),Ee=N+(Math.abs(p)>E/2?Math.abs(p)+E/2:E);G.width=me*b,G.height=Ee*b,G.style.width=`${me}px`,G.style.height=`${Ee}px`,G.style.top=`${-E/2}px`,G.style.left=`${-m>E/2?m:-E/2}px`,w.clearRect(0,0,G.width,G.height),w.fillStyle=l,E>0?(w.lineJoin="round",w.strokeStyle=u,w.lineWidth=E*b):w.strokeStyle="transparent";const Ge=E/2,We=-m>E/2?-m:E/2;w.translate(We*b,Ge*b),F.forEach(P=>{w.beginPath(),P.forEach(_=>{_.forEach((k,U)=>{!U&&w.moveTo(k.in.x*b,k.in.y*b),w.arcTo(k.x*b,k.y*b,k.out.x*b,k.out.y*b,k.arc.radius*b),w.lineTo(k.next.in.x*b,k.next.in.y*b)})}),w.shadowOffsetX=m*b,w.shadowOffsetY=p*b,w.shadowColor=q,w.fill(),w.shadowOffsetX=0,w.shadowOffsetY=0,w.stroke()}),s&&a&&et(w,t,N,i,s,z),w.setTransform(1,0,0,1,0,0)});const L=Ke(o);return typeof r=="string"?r=ke(r,o).map(L):Array.isArray(r)&&(r=r.reduce((N,I,B)=>(typeof I=="string"?ke(I,o).forEach(($,z)=>N.push(L($,`${B}-${z}`))):N.push(I),N),[])),O("p",{ref:v,className:"cloud-letter",style:{width:`${t}px`,"--gap":`${s?Math.ceil(e/d)*d:e}px`,"--height":`${n}px`,"--align":i},children:[x(de.Provider,{value:{every:f.current,words:c.current,spaces:y.current},children:r}),x("canvas",{ref:S,className:"cloud-canvas"})]})},$e=window.innerWidth,Nt='The ${origin} of the term "cloud" can be ${found} in ${the Old English} words clud or clod, meaning a hill or a mass of stone.',At=()=>{const[r,t]=Q(Nt),[e,n]=Q("PARTIAL"),[i,o]=Q("center"),[s,a]=Q(4),[l,u]=Q(32),[h,v]=Q(0),[f,c]=Q(!0),y=p=>{const m=p.target;t(m.value)},g=p=>{const m=p.target;n(m.value)},d=p=>{const m=p.target;o(m.value)},S=p=>{const m=p.target;a(+m.value)},R=p=>{const m=p.target;u(+m.value)},E=p=>{const m=p.target;v(+m.value)};return O(Je,{children:[x(Mt,{width:Math.min($e*.8,512),spaceWidth:s,cloudHeight:l,align:i,mode:e,snap:h,grid:f,children:r}),O("form",{className:"controls",children:[O("fieldset",{className:"controls-row content",children:[x("span",{children:"content:"}),x("textarea",{rows:3,cols:Math.min(Math.max(42,$e/25|0),55),value:r,onInput:y})]}),O("fieldset",{className:"controls-row mode",children:[x("span",{children:"mode:"}),O("label",{children:[x("input",{type:"radio",name:"mode",value:"WORD",checked:e==="WORD",onChange:g}),"WORD"]}),O("label",{children:[x("input",{type:"radio",name:"mode",value:"PARTIAL",checked:e==="PARTIAL",onChange:g}),"PARTIAL"]}),O("label",{children:[x("input",{type:"radio",name:"mode",value:"SPACE",checked:e==="SPACE",onChange:g}),"SPACE"]})]}),O("fieldset",{className:"controls-row align",children:[x("span",{children:"align:"}),O("label",{children:[x("input",{type:"radio",name:"align",value:"left",checked:i==="left",onChange:d}),"left"]}),O("label",{children:[x("input",{type:"radio",name:"align",value:"center",checked:i==="center",onChange:d}),"center"]}),O("label",{children:[x("input",{type:"radio",name:"align",value:"right",checked:i==="right",onChange:d}),"right"]})]}),O("fieldset",{className:"controls-row space-width",children:[x("span",{children:"space width"}),x("input",{type:"range",min:0,max:100,step:1,value:s,onInput:S})]}),O("fieldset",{className:"controls-row cloud-height",children:[x("span",{children:"clouds height"}),x("input",{type:"range",min:20,max:50,step:1,value:l,onInput:R})]}),O("fieldset",{className:"controls-row snap",children:[x("span",{children:"snap: "}),O("label",{className:"snap",children:["cloudHeight  /",x("input",{type:"number",value:h,min:0,max:4,onChange:E})]}),O("label",{className:"grid",children:[x("span",{style:{color:h?"black":"grey"},children:", grid"}),x("input",{type:"checkbox",disabled:!h,checked:f,onChange:()=>c(p=>!p)})]})]})]}),x("a",{className:"repo-link",href:"https://github.com/foretoo/cloud-letter",children:"github repo"})]})};const Ct=ue.createRoot(document.getElementById("root"));Ct.render(x(At,{}));
