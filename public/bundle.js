const{createContext:rt,useRef:j,useContext:_e,useLayoutEffect:Te,useState:$}=React;var be={},ze=ReactDOM;be.createRoot=ze.createRoot,be.hydrateRoot=ze.hydrateRoot;var ve={exports:{}},ge={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var it=React,ot=Symbol.for("react.element"),lt=Symbol.for("react.fragment"),st=Object.prototype.hasOwnProperty,at=it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ut={key:!0,ref:!0,__self:!0,__source:!0};function Je(r,t,e){var n,i={},o=null,l=null;e!==void 0&&(o=""+e),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)st.call(t,n)&&!ut.hasOwnProperty(n)&&(i[n]=t[n]);if(r&&r.defaultProps)for(n in t=r.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:ot,type:r,key:o,ref:l,props:i,_owner:at.current}}ge.Fragment=lt;ge.jsx=Je;ge.jsxs=Je;(function(r){r.exports=ge})(ve);const ft=ve.exports.Fragment,d=ve.exports.jsx,b=ve.exports.jsxs,ye=rt({}),ht=({children:r})=>{const t=j([]),e=j([]),n=j([]);return d(ye.Provider,{value:{every:t.current,words:e.current,spaces:n.current},children:r})},ct=()=>{const{every:r,spaces:t}=_e(ye);return d("span",{className:"space",style:{padding:0,width:"var(--gap)",...T.element},ref:e=>{e&&(!r.includes(e)&&r.push(e),!t.includes(e)&&t.push(e))},children:" "})},se=({children:r,idle:t=!1})=>{const{every:e,words:n}=_e(ye);return d("span",{className:"word",style:T.element,ref:i=>{i&&(t?(i.style.margin="0",i.style.padding="var(--padding-idle)"):(i.style.padding="var(--padding)",i.style.margin="var(--margin-partial)"),i.idle=t,!e.includes(i)&&e.push(i),!n.includes(i)&&n.push(i))},children:r})},vt=r=>(t,e)=>t.match(/\n/g)?d("br",{},`${e}-break`):t===" "?d(ct,{},`${e}-space`):r==="WORD"?d(se,{idle:!1,children:t},`${e}-${t}`):r==="SPACE"?d(se,{idle:!0,children:t},`${e}-${t}`):t.match(/^\$\{[^\$\{]+\}$/g)?d(se,{idle:!1,children:t.replace(/(^\$\{)|(\}$)/g,"")},`${e}-${t}`):d(se,{idle:!0,children:t},`${e}-${t}`),Be=(r,t)=>r.split(t==="PARTIAL"?/(\$\{[^\$\{]+\}|\s)/:/(\s)/).filter(Boolean),De=(r,t,e)=>{t.forEach(n=>{r.beginPath(),n.forEach(i=>{i.forEach((o,l)=>{!l&&r.moveTo(o.in.x*e,o.in.y*e),r.arcTo(o.x*e,o.y*e,o.out.x*e,o.out.y*e,o.arc.radius*e),r.lineTo(o.next.in.x*e,o.next.in.y*e)})}),r.fill(),r.stroke()})},gt=(r,t,e,n,i,o)=>{const l=window.devicePixelRatio;r.strokeStyle="#f74",r.lineWidth=1;const a=o[0][0][2][1]-o[0][0][0][1],s=a/i,u=(h,c)=>{if(n==="left"||n==="center")for(let v=0;v<=t;v+=s)h(v,c);else if(n==="right")for(let v=t;v>=0;v-=s)h(v,c)},f=(h,c)=>{r.moveTo(h*l,c*a*l),r.lineTo(h*l,(c+1)*a*l)};r.beginPath();for(let h=0;h<e/a;h++)u(f,h);r.stroke(),r.strokeStyle="#f40",o.forEach(h=>{r.beginPath(),h[0].forEach(([c,v],p)=>{p?r.lineTo(c*l,v*l):r.moveTo(c*l,v*l)}),r.closePath(),r.stroke()})},T={letter:{position:"relative",margin:0,padding:0,border:0,fontSize:0,lineHeight:0,boxSizing:"border-box",textAlign:"var(--align)",whiteSpace:"pre-wrap"},element:{position:"relative",display:"inline-block",margin:0,padding:0,border:0,boxSizing:"border-box",whiteSpace:"pre",color:"var(--color)",fontSize:"var(--font-size)",fontFamily:"var(--font-family)",fontStyle:"var(--font-style)",fontVariant:"var(--font-variant)",fontWeight:"var(--font-weight)",fontStretch:"var(--font-stretch)",lineHeight:"var(--height)",textAlign:"var(--align)"},fontDefaults:{color:"dodgerBlue",fontSize:16,fontFamily:"sans-serif",fontStyle:"none",fontVariant:"none",fontWeight:"none",fontStretch:"normal"}};/**
 * splaytree v3.1.1
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function yt(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,l;return l={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function a(u){return function(f){return s([u,f])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(r,e)}catch(f){u=[6,f],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var U=function(){function r(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null}return r}();function dt(r,t){return r>t?1:r<t?-1:0}function q(r,t,e){for(var n=new U(null,null),i=n,o=n;;){var l=e(r,t.key);if(l<0){if(t.left===null)break;if(e(r,t.left.key)<0){var a=t.left;if(t.left=a.right,a.right=t,t=a,t.left===null)break}o.left=t,o=t,t=t.left}else if(l>0){if(t.right===null)break;if(e(r,t.right.key)>0){var a=t.right;if(t.right=a.left,a.left=t,t=a,t.right===null)break}i.right=t,i=t,t=t.right}else break}return i.right=t.left,o.left=t.right,t.left=n.right,t.right=n.left,t}function xe(r,t,e,n){var i=new U(r,t);if(e===null)return i.left=i.right=null,i;e=q(r,e,n);var o=n(r,e.key);return o<0?(i.left=e.left,i.right=e,e.left=null):o>=0&&(i.right=e.right,i.left=e,e.right=null),i}function Ge(r,t,e){var n=null,i=null;if(t){t=q(r,t,e);var o=e(t.key,r);o===0?(n=t.left,i=t.right):o<0?(i=t.right,t.right=null,n=t):(n=t.left,t.left=null,i=t)}return{left:n,right:i}}function pt(r,t,e){return t===null?r:(r===null||(t=q(r.key,t,e),t.left=r),t)}function we(r,t,e,n,i){if(r){n(""+t+(e?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+i(r)+`
`);var o=t+(e?"    ":"\u2502   ");r.left&&we(r.left,o,!1,n,i),r.right&&we(r.right,o,!0,n,i)}}var Ie=function(){function r(t){t===void 0&&(t=dt),this._root=null,this._size=0,this._comparator=t}return r.prototype.insert=function(t,e){return this._size++,this._root=xe(t,e,this._root,this._comparator)},r.prototype.add=function(t,e){var n=new U(t,e);this._root===null&&(n.left=n.right=null,this._size++,this._root=n);var i=this._comparator,o=q(t,this._root,i),l=i(t,o.key);return l===0?this._root=o:(l<0?(n.left=o.left,n.right=o,o.left=null):l>0&&(n.right=o.right,n.left=o,o.right=null),this._size++,this._root=n),this._root},r.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},r.prototype._remove=function(t,e,n){var i;if(e===null)return null;e=q(t,e,n);var o=n(t,e.key);return o===0?(e.left===null?i=e.right:(i=q(t,e.left,n),i.right=e.right),this._size--,i):e},r.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=q(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},r.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var i=n(t,e.key);if(i===0)return e;i<0?e=e.left:e=e.right}return null},r.prototype.find=function(t){return this._root&&(this._root=q(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},r.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var i=n(t,e.key);if(i===0)return!0;i<0?e=e.left:e=e.right}return!1},r.prototype.forEach=function(t,e){for(var n=this._root,i=[],o=!1;!o;)n!==null?(i.push(n),n=n.left):i.length!==0?(n=i.pop(),t.call(e,n),n=n.right):o=!0;return this},r.prototype.range=function(t,e,n,i){for(var o=[],l=this._comparator,a=this._root,s;o.length!==0||a;)if(a)o.push(a),a=a.left;else{if(a=o.pop(),s=l(a.key,e),s>0)break;if(l(a.key,t)>=0&&n.call(i,a))return this;a=a.right}return this},r.prototype.keys=function(){var t=[];return this.forEach(function(e){var n=e.key;return t.push(n)}),t},r.prototype.values=function(){var t=[];return this.forEach(function(e){var n=e.data;return t.push(n)}),t},r.prototype.min=function(){return this._root?this.minNode(this._root).key:null},r.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},r.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},r.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},r.prototype.at=function(t){for(var e=this._root,n=!1,i=0,o=[];!n;)if(e)o.push(e),e=e.left;else if(o.length>0){if(e=o.pop(),i===t)return e;i++,e=e.right}else n=!0;return null},r.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var i=this._comparator;e;){var o=i(t.key,e.key);if(o===0)break;o<0?(n=e,e=e.left):e=e.right}return n},r.prototype.prev=function(t){var e=this._root,n=null;if(t.left!==null){for(n=t.left;n.right;)n=n.right;return n}for(var i=this._comparator;e;){var o=i(t.key,e.key);if(o===0)break;o<0?e=e.left:(n=e,e=e.right)}return n},r.prototype.clear=function(){return this._root=null,this._size=0,this},r.prototype.toList=function(){return mt(this._root)},r.prototype.load=function(t,e,n){e===void 0&&(e=[]),n===void 0&&(n=!1);var i=t.length,o=this._comparator;if(n&&ke(t,e,0,i-1,o),this._root===null)this._root=Ee(t,e,0,i),this._size=i;else{var l=bt(this.toList(),xt(t,e),o);i=this._size+i,this._root=Se({head:l},0,i)}return this},r.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(r.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),r.prototype.toString=function(t){t===void 0&&(t=function(n){return String(n.key)});var e=[];return we(this._root,"",!0,function(n){return e.push(n)},t),e.join("")},r.prototype.update=function(t,e,n){var i=this._comparator,o=Ge(t,this._root,i),l=o.left,a=o.right;i(t,e)<0?a=xe(e,n,a,i):l=xe(e,n,l,i),this._root=pt(l,a,i)},r.prototype.split=function(t){return Ge(t,this._root,this._comparator)},r.prototype[Symbol.iterator]=function(){var t;return yt(this,function(e){switch(e.label){case 0:t=this.minNode(),e.label=1;case 1:return t?[4,t]:[3,3];case 2:return e.sent(),t=this.next(t),[3,1];case 3:return[2]}})},r}();function Ee(r,t,e,n){var i=n-e;if(i>0){var o=e+Math.floor(i/2),l=r[o],a=t[o],s=new U(l,a);return s.left=Ee(r,t,e,o),s.right=Ee(r,t,o+1,n),s}return null}function xt(r,t){for(var e=new U(null,null),n=e,i=0;i<r.length;i++)n=n.next=new U(r[i],t[i]);return n.next=null,e.next}function mt(r){for(var t=r,e=[],n=!1,i=new U(null,null),o=i;!n;)t?(e.push(t),t=t.left):e.length>0?(t=o=o.next=e.pop(),t=t.right):n=!0;return o.next=null,i.next}function Se(r,t,e){var n=e-t;if(n>0){var i=t+Math.floor(n/2),o=Se(r,t,i),l=r.head;return l.left=o,r.head=r.head.next,l.right=Se(r,i+1,e),l}return null}function bt(r,t,e){for(var n=new U(null,null),i=n,o=r,l=t;o!==null&&l!==null;)e(o.key,l.key)<0?(i.next=o,o=o.next):(i.next=l,l=l.next),i=i.next;return o!==null?i.next=o:l!==null&&(i.next=l),n.next}function ke(r,t,e,n,i){if(!(e>=n)){for(var o=r[e+n>>1],l=e-1,a=n+1;;){do l++;while(i(r[l],o)<0);do a--;while(i(r[a],o)>0);if(l>=a)break;var s=r[l];r[l]=r[a],r[a]=s,s=t[l],t[l]=t[a],t[a]=s}ke(r,t,e,a,i),ke(r,t,a+1,n,i)}}function C(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function We(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function I(r,t,e){return t&&We(r.prototype,t),e&&We(r,e),r}var ie=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},Re=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,i=t.ur.x<e.ur.x?t.ur.x:e.ur.x,o=t.ll.y<e.ll.y?e.ll.y:t.ll.y,l=t.ur.y<e.ur.y?t.ur.y:e.ur.y;return{ll:{x:n,y:o},ur:{x:i,y:l}}},Y=Number.EPSILON;Y===void 0&&(Y=Math.pow(2,-52));var wt=Y*Y,Pe=function(t,e){if(-Y<t&&t<Y&&-Y<e&&e<Y)return 0;var n=t-e;return n*n<wt*t*e?0:t<e?-1:1},Et=function(){function r(){C(this,r),this.reset()}return I(r,[{key:"reset",value:function(){this.xRounder=new Fe,this.yRounder=new Fe}},{key:"round",value:function(e,n){return{x:this.xRounder.round(e),y:this.yRounder.round(n)}}}]),r}(),Fe=function(){function r(){C(this,r),this.tree=new Ie,this.round(0)}return I(r,[{key:"round",value:function(e){var n=this.tree.add(e),i=this.tree.prev(n);if(i!==null&&Pe(n.key,i.key)===0)return this.tree.remove(e),i.key;var o=this.tree.next(n);return o!==null&&Pe(n.key,o.key)===0?(this.tree.remove(e),o.key):e}}]),r}(),le=new Et,oe=function(t,e){return t.x*e.y-t.y*e.x},Ze=function(t,e){return t.x*e.x+t.y*e.y},qe=function(t,e,n){var i={x:e.x-t.x,y:e.y-t.y},o={x:n.x-t.x,y:n.y-t.y},l=oe(i,o);return Pe(l,0)},fe=function(t){return Math.sqrt(Ze(t,t))},St=function(t,e,n){var i={x:e.x-t.x,y:e.y-t.y},o={x:n.x-t.x,y:n.y-t.y};return oe(o,i)/fe(o)/fe(i)},kt=function(t,e,n){var i={x:e.x-t.x,y:e.y-t.y},o={x:n.x-t.x,y:n.y-t.y};return Ze(o,i)/fe(o)/fe(i)},Ye=function(t,e,n){return e.y===0?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},Ue=function(t,e,n){return e.x===0?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},Rt=function(t,e,n,i){if(e.x===0)return Ue(n,i,t.x);if(i.x===0)return Ue(t,e,n.x);if(e.y===0)return Ye(n,i,t.y);if(i.y===0)return Ye(t,e,n.y);var o=oe(e,i);if(o==0)return null;var l={x:n.x-t.x,y:n.y-t.y},a=oe(l,e)/o,s=oe(l,i)/o,u=t.x+s*e.x,f=n.x+a*i.x,h=t.y+s*e.y,c=n.y+a*i.y,v=(u+f)/2,p=(h+c)/2;return{x:v,y:p}},B=function(){I(r,null,[{key:"compare",value:function(e,n){var i=r.comparePoints(e.point,n.point);return i!==0?i:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:he.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(e,n){return e.x<n.x?-1:e.x>n.x?1:e.y<n.y?-1:e.y>n.y?1:0}}]);function r(t,e){C(this,r),t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=e}return I(r,[{key:"link",value:function(e){if(e.point===this.point)throw new Error("Tried to link already linked events");for(var n=e.point.events,i=0,o=n.length;i<o;i++){var l=n[i];this.point.events.push(l),l.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var e=this.point.events.length,n=0;n<e;n++){var i=this.point.events[n];if(i.segment.consumedBy===void 0)for(var o=n+1;o<e;o++){var l=this.point.events[o];l.consumedBy===void 0&&i.otherSE.point.events===l.otherSE.point.events&&i.segment.consume(l.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var e=[],n=0,i=this.point.events.length;n<i;n++){var o=this.point.events[n];o!==this&&!o.segment.ringOut&&o.segment.isInResult()&&e.push(o)}return e}},{key:"getLeftmostComparator",value:function(e){var n=this,i=new Map,o=function(a){var s=a.otherSE;i.set(a,{sine:St(n.point,e.point,s.point),cosine:kt(n.point,e.point,s.point)})};return function(l,a){i.has(l)||o(l),i.has(a)||o(a);var s=i.get(l),u=s.sine,f=s.cosine,h=i.get(a),c=h.sine,v=h.cosine;return u>=0&&c>=0?f<v?1:f>v?-1:0:u<0&&c<0?f<v?-1:f>v?1:0:c<u?-1:c>u?1:0}}}]),r}(),Pt=0,he=function(){I(r,null,[{key:"compare",value:function(e,n){var i=e.leftSE.point.x,o=n.leftSE.point.x,l=e.rightSE.point.x,a=n.rightSE.point.x;if(a<i)return 1;if(l<o)return-1;var s=e.leftSE.point.y,u=n.leftSE.point.y,f=e.rightSE.point.y,h=n.rightSE.point.y;if(i<o){if(u<s&&u<f)return 1;if(u>s&&u>f)return-1;var c=e.comparePoint(n.leftSE.point);if(c<0)return 1;if(c>0)return-1;var v=n.comparePoint(e.rightSE.point);return v!==0?v:-1}if(i>o){if(s<u&&s<h)return-1;if(s>u&&s>h)return 1;var p=n.comparePoint(e.leftSE.point);if(p!==0)return p;var g=e.comparePoint(n.rightSE.point);return g<0?1:g>0?-1:1}if(s<u)return-1;if(s>u)return 1;if(l<a){var x=n.comparePoint(e.rightSE.point);if(x!==0)return x}if(l>a){var E=e.comparePoint(n.rightSE.point);if(E<0)return 1;if(E>0)return-1}if(l!==a){var w=f-s,S=l-i,m=h-u,k=a-o;if(w>S&&m<k)return 1;if(w<S&&m>k)return-1}return l>a?1:l<a||f<h?-1:f>h?1:e.id<n.id?-1:e.id>n.id?1:0}}]);function r(t,e,n,i){C(this,r),this.id=++Pt,this.leftSE=t,t.segment=this,t.otherSE=e,this.rightSE=e,e.segment=this,e.otherSE=t,this.rings=n,this.windings=i}return I(r,[{key:"replaceRightSE",value:function(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var e=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e<n?e:n},ur:{x:this.rightSE.point.x,y:e>n?e:n}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(e){return e.x===this.leftSE.point.x&&e.y===this.leftSE.point.y||e.x===this.rightSE.point.x&&e.y===this.rightSE.point.y}},{key:"comparePoint",value:function(e){if(this.isAnEndpoint(e))return 0;var n=this.leftSE.point,i=this.rightSE.point,o=this.vector();if(n.x===i.x)return e.x===n.x?0:e.x<n.x?1:-1;var l=(e.y-n.y)/o.y,a=n.x+l*o.x;if(e.x===a)return 0;var s=(e.x-n.x)/o.x,u=n.y+s*o.y;return e.y===u?0:e.y<u?-1:1}},{key:"getIntersection",value:function(e){var n=this.bbox(),i=e.bbox(),o=Re(n,i);if(o===null)return null;var l=this.leftSE.point,a=this.rightSE.point,s=e.leftSE.point,u=e.rightSE.point,f=ie(n,s)&&this.comparePoint(s)===0,h=ie(i,l)&&e.comparePoint(l)===0,c=ie(n,u)&&this.comparePoint(u)===0,v=ie(i,a)&&e.comparePoint(a)===0;if(h&&f)return v&&!c?a:!v&&c?u:null;if(h)return c&&l.x===u.x&&l.y===u.y?null:l;if(f)return v&&a.x===s.x&&a.y===s.y?null:s;if(v&&c)return null;if(v)return a;if(c)return u;var p=Rt(l,this.vector(),s,e.vector());return p===null||!ie(o,p)?null:le.round(p.x,p.y)}},{key:"split",value:function(e){var n=[],i=e.events!==void 0,o=new B(e,!0),l=new B(e,!1),a=this.rightSE;this.replaceRightSE(l),n.push(l),n.push(o);var s=new r(o,a,this.rings.slice(),this.windings.slice());return B.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),B.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(o.checkForConsuming(),l.checkForConsuming()),n}},{key:"swapEvents",value:function(){var e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var n=0,i=this.windings.length;n<i;n++)this.windings[n]*=-1}},{key:"consume",value:function(e){for(var n=this,i=e;n.consumedBy;)n=n.consumedBy;for(;i.consumedBy;)i=i.consumedBy;var o=r.compare(n,i);if(o!==0){if(o>0){var l=n;n=i,i=l}if(n.prev===i){var a=n;n=i,i=a}for(var s=0,u=i.rings.length;s<u;s++){var f=i.rings[s],h=i.windings[s],c=n.rings.indexOf(f);c===-1?(n.rings.push(f),n.windings.push(h)):n.windings[c]+=h}i.rings=null,i.windings=null,i.consumedBy=n,i.leftSE.consumedBy=n.leftSE,i.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};for(var n=this._afterState.rings,i=this._afterState.windings,o=this._afterState.multiPolys,l=0,a=this.rings.length;l<a;l++){var s=this.rings[l],u=this.windings[l],f=n.indexOf(s);f===-1?(n.push(s),i.push(u)):i[f]+=u}for(var h=[],c=[],v=0,p=n.length;v<p;v++)if(i[v]!==0){var g=n[v],x=g.poly;if(c.indexOf(x)===-1)if(g.isExterior)h.push(x);else{c.indexOf(x)===-1&&c.push(x);var E=h.indexOf(g.poly);E!==-1&&h.splice(E,1)}}for(var w=0,S=h.length;w<S;w++){var m=h[w].multiPoly;o.indexOf(m)===-1&&o.push(m)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var e=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(z.type){case"union":{var i=e.length===0,o=n.length===0;this._isInResult=i!==o;break}case"intersection":{var l,a;e.length<n.length?(l=e.length,a=n.length):(l=n.length,a=e.length),this._isInResult=a===z.numMultiPolys&&l<a;break}case"xor":{var s=Math.abs(e.length-n.length);this._isInResult=s%2===1;break}case"difference":{var u=function(h){return h.length===1&&h[0].isSubject};this._isInResult=u(e)!==u(n);break}default:throw new Error("Unrecognized operation type found ".concat(z.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,i){var o,l,a,s=B.comparePoints(e,n);if(s<0)o=e,l=n,a=1;else if(s>0)o=n,l=e,a=-1;else throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));var u=new B(o,!0),f=new B(l,!1);return new r(u,f,[i],[a])}}]),r}(),Xe=function(){function r(t,e,n){if(C(this,r),!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=n,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=le.round(t[0][0],t[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,l=1,a=t.length;l<a;l++){if(typeof t[l][0]!="number"||typeof t[l][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var s=le.round(t[l][0],t[l][1]);s.x===o.x&&s.y===o.y||(this.segments.push(he.fromRing(o,s,this)),s.x<this.bbox.ll.x&&(this.bbox.ll.x=s.x),s.y<this.bbox.ll.y&&(this.bbox.ll.y=s.y),s.x>this.bbox.ur.x&&(this.bbox.ur.x=s.x),s.y>this.bbox.ur.y&&(this.bbox.ur.y=s.y),o=s)}(i.x!==o.x||i.y!==o.y)&&this.segments.push(he.fromRing(o,i,this))}return I(r,[{key:"getSweepEvents",value:function(){for(var e=[],n=0,i=this.segments.length;n<i;n++){var o=this.segments[n];e.push(o.leftSE),e.push(o.rightSE)}return e}}]),r}(),_t=function(){function r(t,e){if(C(this,r),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Xe(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var n=1,i=t.length;n<i;n++){var o=new Xe(t[n],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=e}return I(r,[{key:"getSweepEvents",value:function(){for(var e=this.exteriorRing.getSweepEvents(),n=0,i=this.interiorRings.length;n<i;n++)for(var o=this.interiorRings[n].getSweepEvents(),l=0,a=o.length;l<a;l++)e.push(o[l]);return e}}]),r}(),Ve=function(){function r(t,e){if(C(this,r),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var n=0,i=t.length;n<i;n++){var o=new _t(t[n],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=e}return I(r,[{key:"getSweepEvents",value:function(){for(var e=[],n=0,i=this.polys.length;n<i;n++)for(var o=this.polys[n].getSweepEvents(),l=0,a=o.length;l<a;l++)e.push(o[l]);return e}}]),r}(),It=function(){I(r,null,[{key:"factory",value:function(e){for(var n=[],i=0,o=e.length;i<o;i++){var l=e[i];if(!(!l.isInResult()||l.ringOut)){for(var a=null,s=l.leftSE,u=l.rightSE,f=[s],h=s.point,c=[];a=s,s=u,f.push(s),s.point!==h;)for(;;){var v=s.getAvailableLinkedEvents();if(v.length===0){var p=f[0].point,g=f[f.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(g.x,", ").concat(g.y,"]."))}if(v.length===1){u=v[0].otherSE;break}for(var x=null,E=0,w=c.length;E<w;E++)if(c[E].point===s.point){x=E;break}if(x!==null){var S=c.splice(x)[0],m=f.splice(S.index);m.unshift(m[0].otherSE),n.push(new r(m.reverse()));continue}c.push({index:f.length,point:s.point});var k=s.getLeftmostComparator(a);u=v.sort(k)[0].otherSE;break}n.push(new r(f))}}return n}}]);function r(t){C(this,r),this.events=t;for(var e=0,n=t.length;e<n;e++)t[e].segment.ringOut=this;this.poly=null}return I(r,[{key:"getGeom",value:function(){for(var e=this.events[0].point,n=[e],i=1,o=this.events.length-1;i<o;i++){var l=this.events[i].point,a=this.events[i+1].point;qe(l,e,a)!==0&&(n.push(l),e=l)}if(n.length===1)return null;var s=n[0],u=n[1];qe(s,e,u)===0&&n.shift(),n.push(n[0]);for(var f=this.isExteriorRing()?1:-1,h=this.isExteriorRing()?0:n.length-1,c=this.isExteriorRing()?n.length:-1,v=[],p=h;p!=c;p+=f)v.push([n[p].x,n[p].y]);return v}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var e=this.events[0],n=1,i=this.events.length;n<i;n++){var o=this.events[n];B.compare(e,o)>0&&(e=o)}for(var l=e.segment.prevInResult(),a=l?l.prevInResult():null;;){if(!l)return null;if(!a)return l.ringOut;if(a.ringOut!==l.ringOut)return a.ringOut.enclosingRing()!==l.ringOut?l.ringOut:l.ringOut.enclosingRing();l=a.prevInResult(),a=l?l.prevInResult():null}}}]),r}(),Qe=function(){function r(t){C(this,r),this.exteriorRing=t,t.poly=this,this.interiorRings=[]}return I(r,[{key:"addInterior",value:function(e){this.interiorRings.push(e),e.poly=this}},{key:"getGeom",value:function(){var e=[this.exteriorRing.getGeom()];if(e[0]===null)return null;for(var n=0,i=this.interiorRings.length;n<i;n++){var o=this.interiorRings[n].getGeom();o!==null&&e.push(o)}return e}}]),r}(),Ot=function(){function r(t){C(this,r),this.rings=t,this.polys=this._composePolys(t)}return I(r,[{key:"getGeom",value:function(){for(var e=[],n=0,i=this.polys.length;n<i;n++){var o=this.polys[n].getGeom();o!==null&&e.push(o)}return e}},{key:"_composePolys",value:function(e){for(var n=[],i=0,o=e.length;i<o;i++){var l=e[i];if(!l.poly)if(l.isExteriorRing())n.push(new Qe(l));else{var a=l.enclosingRing();a.poly||n.push(new Qe(a)),a.poly.addInterior(l)}}return n}}]),r}(),At=function(){function r(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:he.compare;C(this,r),this.queue=t,this.tree=new Ie(e),this.segments=[]}return I(r,[{key:"process",value:function(e){var n=e.segment,i=[];if(e.consumedBy)return e.isLeft?this.queue.remove(e.otherSE):this.tree.remove(n),i;var o=e.isLeft?this.tree.insert(n):this.tree.find(n);if(!o)throw new Error("Unable to find segment #".concat(n.id," ")+"[".concat(n.leftSE.point.x,", ").concat(n.leftSE.point.y,"] -> ")+"[".concat(n.rightSE.point.x,", ").concat(n.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var l=o,a=o,s=void 0,u=void 0;s===void 0;)l=this.tree.prev(l),l===null?s=null:l.key.consumedBy===void 0&&(s=l.key);for(;u===void 0;)a=this.tree.next(a),a===null?u=null:a.key.consumedBy===void 0&&(u=a.key);if(e.isLeft){var f=null;if(s){var h=s.getIntersection(n);if(h!==null&&(n.isAnEndpoint(h)||(f=h),!s.isAnEndpoint(h)))for(var c=this._splitSafely(s,h),v=0,p=c.length;v<p;v++)i.push(c[v])}var g=null;if(u){var x=u.getIntersection(n);if(x!==null&&(n.isAnEndpoint(x)||(g=x),!u.isAnEndpoint(x)))for(var E=this._splitSafely(u,x),w=0,S=E.length;w<S;w++)i.push(E[w])}if(f!==null||g!==null){var m=null;if(f===null)m=g;else if(g===null)m=f;else{var k=B.comparePoints(f,g);m=k<=0?f:g}this.queue.remove(n.rightSE),i.push(n.rightSE);for(var y=n.split(m),O=0,_=y.length;O<_;O++)i.push(y[O])}i.length>0?(this.tree.remove(n),i.push(e)):(this.segments.push(n),n.prev=s)}else{if(s&&u){var N=s.getIntersection(u);if(N!==null){if(!s.isAnEndpoint(N))for(var W=this._splitSafely(s,N),D=0,Z=W.length;D<Z;D++)i.push(W[D]);if(!u.isAnEndpoint(N))for(var X=this._splitSafely(u,N),V=0,K=X.length;V<K;V++)i.push(X[V])}}this.tree.remove(n)}return i}},{key:"_splitSafely",value:function(e,n){this.tree.remove(e);var i=e.rightSE;this.queue.remove(i);var o=e.split(n);return o.push(i),e.consumedBy===void 0&&this.tree.insert(e),o}}]),r}(),He=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Nt=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Mt=function(){function r(){C(this,r)}return I(r,[{key:"run",value:function(e,n,i){z.type=e,le.reset();for(var o=[new Ve(n,!0)],l=0,a=i.length;l<a;l++)o.push(new Ve(i[l],!1));if(z.numMultiPolys=o.length,z.type==="difference")for(var s=o[0],u=1;u<o.length;)Re(o[u].bbox,s.bbox)!==null?u++:o.splice(u,1);if(z.type==="intersection"){for(var f=0,h=o.length;f<h;f++)for(var c=o[f],v=f+1,p=o.length;v<p;v++)if(Re(c.bbox,o[v].bbox)===null)return[]}for(var g=new Ie(B.compare),x=0,E=o.length;x<E;x++)for(var w=o[x].getSweepEvents(),S=0,m=w.length;S<m;S++)if(g.insert(w[S]),g.size>He)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var k=new At(g),y=g.size,O=g.pop();O;){var _=O.key;if(g.size===y){var N=_.segment;throw new Error("Unable to pop() ".concat(_.isLeft?"left":"right"," SweepEvent ")+"[".concat(_.point.x,", ").concat(_.point.y,"] from segment #").concat(N.id," ")+"[".concat(N.leftSE.point.x,", ").concat(N.leftSE.point.y,"] -> ")+"[".concat(N.rightSE.point.x,", ").concat(N.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(g.size>He)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(k.segments.length>Nt)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var W=k.process(_),D=0,Z=W.length;D<Z;D++){var X=W[D];X.consumedBy===void 0&&g.insert(X)}y=g.size,O=g.pop()}le.reset();var V=It.factory(k.segments),K=new Ot(V);return K.getGeom()}}]),r}(),z=new Mt,Ct=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return z.run("union",t,n)},Lt=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return z.run("intersection",t,n)},$t=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return z.run("xor",t,n)},Tt=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return z.run("difference",t,n)},zt={union:Ct,intersection:Lt,xor:$t,difference:Tt};const ue=r=>Math.round(r*1e10)/1e10,me=(r,t)=>ue(Math.sqrt((t.x-r.x)*(t.x-r.x)+(t.y-r.y)*(t.y-r.y))),ce=Math.PI,Bt=ce*2,Dt=(r,t)=>{const e=t-r;return e>ce&&e<Bt||e<0&&e>-ce?-1:1},Gt=(r,t,e,n,i,o)=>{const l=Math.atan2(r.y-t.y,r.x-t.x),a=Math.atan2(e.y-t.y,e.x-t.x),s=Math.acos((n*n+o*o-i*i)/(2*n*o)),u=1/Math.tan(s/2),f=Dt(l,a),h=l+f*s/2;return{prev:l,next:a,main:s,vel:u,dir:f,bis:h}},Wt=(r,t=0)=>{const e=r.length,n=[],i=[],o=[];r.forEach((s,u)=>{const f=r[(u-1+e)%e],h=r[(u+1)%e],c=me(f,s),v=me(f,h),p=me(s,h),g=Gt(f,s,h,c,v,p);g.main===0&&(g.main=Number.EPSILON,g.vel=Number.MAX_SAFE_INTEGER),g.main===ce&&(g.vel=0);const x={x:s.x,y:s.y,angle:g,offset:0,arc:{radius:t,hit:t,lim:Math.min(p/g.vel,c/g.vel,s.r||0)},in:{length:c,rest:c},out:{length:p,rest:p},locked:!1,id:u,get prev(){return n[(u-1+e)%e]},get next(){return n[(u+1)%e]}};isNaN(g.main)&&(g.main=0,g.bis=g.prev||g.next,o.push(x)),typeof s.r=="number"&&(s.r===0?o.push(x):i.push(x)),n.push(x)}),o.forEach(s=>{s.angle.vel=0,s.arc.radius=0,Oe(s)}),n.forEach(s=>{s.arc.hit=Math.min(s.out.rest/(s.angle.vel+s.next.angle.vel),s.in.rest/(s.angle.vel+s.prev.angle.vel))});let l=ae(i);for(;l;)Ft(l),l=ae(i);for(l=ae(n);l;)qt(l,t),l=ae(n);const a=n.map(s=>{const u=s.arc.radius/Math.sin(s.angle.main/2);return{id:s.id,x:s.x,y:s.y,angle:{main:ue(s.angle.main),prev:s.angle.prev,next:s.angle.next,bis:s.angle.bis,dir:s.angle.dir},offset:ue(s.offset),arc:{radius:ue(s.arc.radius),x:s.x+(Math.cos(s.angle.bis)*u||0),y:s.y+(Math.sin(s.angle.bis)*u||0)},in:{length:s.in.length,x:s.x+Math.cos(s.angle.prev)*s.offset,y:s.y+Math.sin(s.angle.prev)*s.offset},out:{length:s.out.length,x:s.x+Math.cos(s.angle.next)*s.offset,y:s.y+Math.sin(s.angle.next)*s.offset},get prev(){return a[(s.id-1+e)%e]},get next(){return a[(s.id+1)%e]}}});return a},Ft=r=>{const{prev:t,next:e}=r;t.locked&&!e.locked?r.arc.radius=Math.min(Math.max((r.out.length-e.arc.lim*e.angle.vel)/r.angle.vel,r.out.length/(r.angle.vel+e.angle.vel)),r.in.rest/r.angle.vel,r.arc.lim):e.locked&&!t.locked?r.arc.radius=Math.min(Math.max((r.in.length-t.arc.lim*t.angle.vel)/r.angle.vel,r.in.length/(r.angle.vel+t.angle.vel)),r.out.rest/r.angle.vel,r.arc.lim):e.locked&&t.locked?r.arc.radius=Math.min(r.in.rest/r.angle.vel,r.out.rest/r.angle.vel,r.arc.lim):r.arc.radius=Math.min(Math.max((r.in.length-t.arc.lim*t.angle.vel)/r.angle.vel,r.in.length/(r.angle.vel+t.angle.vel)),Math.max((r.out.length-e.arc.lim*e.angle.vel)/r.angle.vel,r.out.length/(r.angle.vel+e.angle.vel)),r.arc.lim),Oe(r)},qt=(r,t)=>{if(t>r.arc.hit){const{prev:e,next:n}=r;e.locked&&!n.locked?r.arc.radius=Math.max(Math.min(r.in.rest/r.angle.vel,r.out.length/(r.angle.vel+n.angle.vel),r.arc.radius),0):n.locked&&!e.locked?r.arc.radius=Math.max(Math.min(r.out.rest/r.angle.vel,r.in.length/(r.angle.vel+e.angle.vel),r.arc.radius),0):n.locked&&e.locked?r.arc.radius=Math.max(Math.min(r.in.rest/r.angle.vel,r.out.rest/r.angle.vel,r.arc.radius),0):r.arc.radius=r.arc.hit}Oe(r)},Oe=r=>{const{prev:t,next:e}=r;r.offset=r.arc.radius*r.angle.vel,t.out.rest-=r.offset,r.in.rest-=r.offset,r.out.rest-=r.offset,e.in.rest-=r.offset,r.locked=!0,t.arc.hit=Math.min(t.in.length/(t.angle.vel+t.prev.angle.vel),t.in.rest/t.angle.vel,t.out.rest/t.angle.vel),e.arc.hit=Math.min(e.out.length/(e.angle.vel+e.next.angle.vel),e.out.rest/e.angle.vel,e.in.rest/e.angle.vel)},ae=r=>r.reduce((t,e)=>e.locked?t:t?e.arc.hit<t.arc.hit?e:t:e,null),Yt=({children:r,width:t=360,spaceWidth:e=32,cloudHeight:n=32,padding:i=16,radius:o=.25,align:l="left",mode:a="WORD",snap:s=4,grid:u=!1,fill:f="white",stroke:h="dodgerBlue",strokeWidth:c=2,shadowOffsetX:v=-3,shadowOffsetY:p=5,shadowColor:g=h,font:x=T.fontDefaults})=>{const{every:E,words:w,spaces:S}=_e(ye),m=j(null),k=j(null),y=j(null),O=j(r),_=s?n/s:1;O.current!==r&&(E.length=0,w.length=0,S.length=0,O.current=r);const{color:N=h||T.fontDefaults.color,size:W=T.fontDefaults.fontSize,family:D=T.fontDefaults.fontFamily,style:Z=T.fontDefaults.fontStyle,variant:X=T.fontDefaults.fontVariant,weight:V=T.fontDefaults.fontWeight,stretch:K=T.fontDefaults.fontStretch}=x;Te(()=>{y.current=k.current.getContext("2d"),y.current.lineJoin="round"},[]),Te(()=>{if(w.forEach(R=>R.style.width=""),E.forEach(R=>R.style.left=""),s&&(w.forEach(R=>{let{width:P}=R.getBoundingClientRect();P=Math.ceil(P/_)*_,R.style.width=`${P}px`}),l==="center")){const{top:R,left:P}=m.current.getBoundingClientRect();let L=NaN,ne=NaN;E.forEach(re=>{let{x:$e,y:pe}=re.getBoundingClientRect();$e-=P,pe-=R,pe!==L&&(L=pe,ne=-($e%_/_)*_),re.style.left=`${ne}px`})}const{height:J,top:ee,left:de}=m.current.getBoundingClientRect(),te=(a==="WORD"||a==="PARTIAL"?w.filter(R=>!R.idle):S).map(R=>{let{x:P,y:L,width:ne,height:re}=R.getBoundingClientRect();return P-=de,L-=ee,[[[P,L],[P+ne,L],[P+ne,L+re],[P,L+re]]]}),Me=te.length?zt.union(...te).map(R=>R.map(P=>(P.pop(),P.map(L=>({x:L[0],y:L[1]}))))).map(R=>R.map(P=>Wt(P,n*o))):[],G=window.devicePixelRatio,M=y.current,F=k.current,A=c,Q=v,H=p,Ce=t+Math.abs(Q)+A,Le=J+Math.abs(H)+A;F.width=Ce*G,F.height=Le*G,F.style.width=`${Ce}px`,F.style.height=`${Le}px`,F.style.top=`${H<0?H-A/2:-A/2}px`,F.style.left=`${Q<0?Q-A/2:-A/2}px`,M.clearRect(0,0,F.width,F.height),A>0?M.lineWidth=A*G:M.strokeStyle="transparent";const Ke=H<0?-H+A/2:A/2,et=Q<0?-Q+A/2:A/2;M.fillStyle=g,A>0&&(M.strokeStyle=g),M.translate((et+Q)*G,(Ke+H)*G),De(M,Me,G),M.fillStyle=f,A>0&&(M.strokeStyle=h),M.translate(-Q*G,-H*G),De(M,Me,G),s&&u&&gt(M,t,J,l,s,te),M.setTransform(1,0,0,1,0,0)});const Ae=vt(a);return typeof r=="string"?r=Be(r,a).map(Ae):Array.isArray(r)&&(r=r.reduce((J,ee,de)=>(typeof ee=="string"?Be(ee,a).forEach((Ne,te)=>J.push(Ae(Ne,`${de}-${te}`))):J.push(ee),J),[])),b("p",{ref:m,style:{...T.letter,width:`${t}px`,"--gap":`${s?Math.ceil(e/_)*_:e}px`,"--height":`${n}px`,"--padding":`0 ${i}px`,"--padding-idle":`0 ${a==="PARTIAL"?0:i}px`,"--margin-partial":`0 ${a==="PARTIAL"&&s===0?W/4:0}px`,"--align":l,"--color":N,"--font-size":`${W}px`,"--font-family":D,"--font-style":Z,"--font-variant":X,"--font-weight":V,"--font-stretch":K},children:[r,d("canvas",{ref:k,style:{position:"absolute",zIndex:-1}})]})},Ut=({children:r,...t})=>d(ht,{children:d(Yt,{...t,children:r})}),je=window.innerWidth,Xt='The ${origin} of the term ${"cloud"} can be found\nin ${the Old English} words ${clud or clod,} meaning\na ${hill} or a mass of stone.',Vt=()=>{const[r,t]=$(Xt),[e,n]=$("PARTIAL"),[i,o]=$("left"),[l,a]=$(1),[s,u]=$(33),[f,h]=$(16),[c,v]=$(4),[p,g]=$(!1),[x,E]=$("#ffffff"),[w,S]=$("#1e90ff"),[m,k]=$({x:-3,y:5});return b(ft,{children:[d(Ut,{width:Math.min(je*.8,512),spaceWidth:l,cloudHeight:s,font:{color:w,family:"Verdana",size:16},padding:f,radius:.333,align:i,mode:e,snap:c,grid:p,fill:x,stroke:w,shadowOffsetX:m.x,shadowOffsetY:m.y,children:r}),b("form",{className:"controls",children:[b("fieldset",{className:"controls-row content",children:[d("span",{children:"content:"}),d("textarea",{rows:3,cols:Math.min(Math.max(42,je/25|0),55),value:r,onInput:y=>t(y.target.value)})]}),b("fieldset",{className:"controls-row view",children:[d("span",{children:"view:"}),b("label",{children:["fill",d("div",{className:"hidder",children:d("input",{type:"color",value:x,onChange:y=>E(y.target.value)})})]}),b("label",{children:["stroke",d("div",{className:"hidder",children:d("input",{type:"color",value:w,onChange:y=>S(y.target.value)})})]}),d("span",{className:"shadow-label",children:"shadow:"}),b("label",{children:["x",d("input",{type:"number",value:m.x,min:-20,max:20,onChange:y=>k(O=>({x:+y.target.value,y:O.y}))})]}),b("label",{children:["y",d("input",{type:"number",value:m.y,min:-20,max:20,onChange:y=>k(O=>({y:+y.target.value,x:O.x}))})]})]}),b("fieldset",{className:"controls-row mode",children:[d("span",{children:"mode:"}),b("label",{children:[d("input",{type:"radio",name:"mode",value:"WORD",checked:e==="WORD",onChange:y=>n(y.target.value)}),"WORD"]}),b("label",{children:[d("input",{type:"radio",name:"mode",value:"PARTIAL",checked:e==="PARTIAL",onChange:y=>n(y.target.value)}),"PARTIAL"]}),b("label",{children:[d("input",{type:"radio",name:"mode",value:"SPACE",checked:e==="SPACE",onChange:y=>n(y.target.value)}),"SPACE"]})]}),b("fieldset",{className:"controls-row align",children:[d("span",{children:"align:"}),b("label",{children:[d("input",{type:"radio",name:"align",value:"left",checked:i==="left",onChange:y=>o(y.target.value)}),"left"]}),b("label",{children:[d("input",{type:"radio",name:"align",value:"center",checked:i==="center",onChange:y=>o(y.target.value)}),"center"]}),b("label",{children:[d("input",{type:"radio",name:"align",value:"right",checked:i==="right",onChange:y=>o(y.target.value)}),"right"]})]}),b("fieldset",{className:"controls-row clouds",children:[d("span",{children:"cloud's:"}),b("div",{children:[b("label",{children:["height",d("input",{type:"range",min:20,max:50,step:1,value:s,onInput:y=>u(+y.target.value)})]}),b("label",{children:["width",d("input",{type:"range",min:0,max:50,step:1,value:f,onInput:y=>h(+y.target.value)})]}),b("label",{children:["space between",d("input",{type:"range",min:0,max:100,step:1,value:l,onInput:y=>a(+y.target.value)})]})]})]}),b("fieldset",{className:"controls-row snap",children:[d("span",{children:"snap: "}),b("label",{className:"snap",children:["cloudHeight  /",d("input",{type:"number",value:c,onChange:y=>v(+y.target.value)})]}),b("label",{className:"grid",children:[d("span",{style:{color:c?"black":"grey"},children:", grid"}),d("input",{type:"checkbox",disabled:!c,checked:p,onChange:()=>g(y=>!y)})]})]})]}),d("a",{className:"repo-link",href:"https://github.com/foretoo/cloud-letter",children:"github repo"})]})};const Qt=be.createRoot(document.getElementById("root"));Qt.render(d(Vt,{}));
