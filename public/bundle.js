const{createContext:Ve,useContext:We,useRef:H,useLayoutEffect:Pe,useState:B}=React;var ve={},_e=ReactDOM;ve.createRoot=_e.createRoot,ve.hydrateRoot=_e.hydrateRoot;const He={every:[],words:[],spaces:[]},Ee=Ve(He);var ae={exports:{}},ue={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var je=React,Je=Symbol.for("react.element"),Ze=Symbol.for("react.fragment"),Ke=Object.prototype.hasOwnProperty,et=je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tt={key:!0,ref:!0,__self:!0,__source:!0};function qe(n,t,e){var r,i={},o=null,l=null;e!==void 0&&(o=""+e),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)Ke.call(t,r)&&!tt.hasOwnProperty(r)&&(i[r]=t[r]);if(n&&n.defaultProps)for(r in t=n.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Je,type:n,key:o,ref:l,props:i,_owner:et.current}}ue.Fragment=Ze;ue.jsx=qe;ue.jsxs=qe;(function(n){n.exports=ue})(ae);const rt=ae.exports.Fragment,p=ae.exports.jsx,E=ae.exports.jsxs,nt=()=>{const{every:n,spaces:t}=We(Ee);return p("span",{className:"cloud-element space",ref:e=>{e&&(!n.includes(e)&&n.push(e),!t.includes(e)&&t.push(e))},children:" "})},re=({children:n,idle:t=!1})=>{const{every:e,words:r}=We(Ee);return p("span",{className:"cloud-element word",ref:i=>{i&&(t?(i.classList.remove("fill"),i.classList.add("idle")):(i.classList.remove("idle"),i.classList.add("fill")),i.idle=t,!e.includes(i)&&e.push(i),!r.includes(i)&&r.push(i))},children:n})},it=n=>(t,e)=>t.match(/\n/g)?p("br",{},`${e}-break`):t===" "?p(nt,{},`${e}-space`):n==="WORD"?p(re,{idle:!1,children:t},`${e}-${t}`):n==="SPACE"?p(re,{idle:!0,children:t},`${e}-${t}`):t.match(/^\$\{[^\$\{]+\}$/g)?p(re,{idle:!1,children:t.replace(/(^\$\{)|(\}$)/g,"")},`${e}-${t}`):p(re,{idle:!0,children:t},`${e}-${t}`),Ie=(n,t)=>n.split(t==="PARTIAL"?/(\$\{[^\$\{]+\}|\s)/:/(\s)/).filter(Boolean),Oe=(n,t,e)=>{t.forEach(r=>{n.beginPath(),r.forEach(i=>{i.forEach((o,l)=>{!l&&n.moveTo(o.in.x*e,o.in.y*e),n.arcTo(o.x*e,o.y*e,o.out.x*e,o.out.y*e,o.arc.radius*e),n.lineTo(o.next.in.x*e,o.next.in.y*e)})}),n.fill(),n.stroke()})},ot=(n,t,e,r,i,o)=>{const l=window.devicePixelRatio;(()=>o.reduce((f,c)=>c[0][0][0]<f?c[0][0][0]:f,t))(),n.strokeStyle="#f74",n.lineWidth=1;const s=o[0][0][2][1]-o[0][0][0][1],u=s/i,h=(f,c)=>{if(r==="left"||r==="center")for(let y=0;y<=t;y+=u)f(y,c);else if(r==="right")for(let y=t;y>=0;y-=u)f(y,c)},g=(f,c)=>{n.moveTo(f*l,c*s*l),n.lineTo(f*l,(c+1)*s*l)};n.beginPath();for(let f=0;f<e/s;f++)h(g,f);n.stroke(),n.strokeStyle="#f40",o.forEach(f=>{n.beginPath(),f[0].forEach(([c,y],v)=>{v?n.lineTo(c*l,y*l):n.moveTo(c*l,y*l)}),n.closePath(),n.stroke()})};/**
 * splaytree v3.1.1
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function lt(n,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function a(u){return function(h){return s([u,h])}}function s(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(n,e)}catch(h){u=[6,h],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var V=function(){function n(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null}return n}();function st(n,t){return n>t?1:n<t?-1:0}function X(n,t,e){for(var r=new V(null,null),i=r,o=r;;){var l=e(n,t.key);if(l<0){if(t.left===null)break;if(e(n,t.left.key)<0){var a=t.left;if(t.left=a.right,a.right=t,t=a,t.left===null)break}o.left=t,o=t,t=t.left}else if(l>0){if(t.right===null)break;if(e(n,t.right.key)>0){var a=t.right;if(t.right=a.left,a.left=t,t=a,t.right===null)break}i.right=t,i=t,t=t.right}else break}return i.right=t.left,o.left=t.right,t.left=r.right,t.right=r.left,t}function fe(n,t,e,r){var i=new V(n,t);if(e===null)return i.left=i.right=null,i;e=X(n,e,r);var o=r(n,e.key);return o<0?(i.left=e.left,i.right=e,e.left=null):o>=0&&(i.right=e.right,i.left=e,e.right=null),i}function Ne(n,t,e){var r=null,i=null;if(t){t=X(n,t,e);var o=e(t.key,n);o===0?(r=t.left,i=t.right):o<0?(i=t.right,t.right=null,r=t):(r=t.left,t.left=null,i=t)}return{left:r,right:i}}function at(n,t,e){return t===null?n:(n===null||(t=X(n.key,t,e),t.left=n),t)}function ge(n,t,e,r,i){if(n){r(""+t+(e?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+i(n)+`
`);var o=t+(e?"    ":"\u2502   ");n.left&&ge(n.left,o,!1,r,i),n.right&&ge(n.right,o,!0,r,i)}}var we=function(){function n(t){t===void 0&&(t=st),this._root=null,this._size=0,this._comparator=t}return n.prototype.insert=function(t,e){return this._size++,this._root=fe(t,e,this._root,this._comparator)},n.prototype.add=function(t,e){var r=new V(t,e);this._root===null&&(r.left=r.right=null,this._size++,this._root=r);var i=this._comparator,o=X(t,this._root,i),l=i(t,o.key);return l===0?this._root=o:(l<0?(r.left=o.left,r.right=o,o.left=null):l>0&&(r.right=o.right,r.left=o,o.right=null),this._size++,this._root=r),this._root},n.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},n.prototype._remove=function(t,e,r){var i;if(e===null)return null;e=X(t,e,r);var o=r(t,e.key);return o===0?(e.left===null?i=e.right:(i=X(t,e.left,r),i.right=e.right),this._size--,i):e},n.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=X(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},n.prototype.findStatic=function(t){for(var e=this._root,r=this._comparator;e;){var i=r(t,e.key);if(i===0)return e;i<0?e=e.left:e=e.right}return null},n.prototype.find=function(t){return this._root&&(this._root=X(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},n.prototype.contains=function(t){for(var e=this._root,r=this._comparator;e;){var i=r(t,e.key);if(i===0)return!0;i<0?e=e.left:e=e.right}return!1},n.prototype.forEach=function(t,e){for(var r=this._root,i=[],o=!1;!o;)r!==null?(i.push(r),r=r.left):i.length!==0?(r=i.pop(),t.call(e,r),r=r.right):o=!0;return this},n.prototype.range=function(t,e,r,i){for(var o=[],l=this._comparator,a=this._root,s;o.length!==0||a;)if(a)o.push(a),a=a.left;else{if(a=o.pop(),s=l(a.key,e),s>0)break;if(l(a.key,t)>=0&&r.call(i,a))return this;a=a.right}return this},n.prototype.keys=function(){var t=[];return this.forEach(function(e){var r=e.key;return t.push(r)}),t},n.prototype.values=function(){var t=[];return this.forEach(function(e){var r=e.data;return t.push(r)}),t},n.prototype.min=function(){return this._root?this.minNode(this._root).key:null},n.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},n.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},n.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},n.prototype.at=function(t){for(var e=this._root,r=!1,i=0,o=[];!r;)if(e)o.push(e),e=e.left;else if(o.length>0){if(e=o.pop(),i===t)return e;i++,e=e.right}else r=!0;return null},n.prototype.next=function(t){var e=this._root,r=null;if(t.right){for(r=t.right;r.left;)r=r.left;return r}for(var i=this._comparator;e;){var o=i(t.key,e.key);if(o===0)break;o<0?(r=e,e=e.left):e=e.right}return r},n.prototype.prev=function(t){var e=this._root,r=null;if(t.left!==null){for(r=t.left;r.right;)r=r.right;return r}for(var i=this._comparator;e;){var o=i(t.key,e.key);if(o===0)break;o<0?e=e.left:(r=e,e=e.right)}return r},n.prototype.clear=function(){return this._root=null,this._size=0,this},n.prototype.toList=function(){return ht(this._root)},n.prototype.load=function(t,e,r){e===void 0&&(e=[]),r===void 0&&(r=!1);var i=t.length,o=this._comparator;if(r&&pe(t,e,0,i-1,o),this._root===null)this._root=ye(t,e,0,i),this._size=i;else{var l=ft(this.toList(),ut(t,e),o);i=this._size+i,this._root=de({head:l},0,i)}return this},n.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),n.prototype.toString=function(t){t===void 0&&(t=function(r){return String(r.key)});var e=[];return ge(this._root,"",!0,function(r){return e.push(r)},t),e.join("")},n.prototype.update=function(t,e,r){var i=this._comparator,o=Ne(t,this._root,i),l=o.left,a=o.right;i(t,e)<0?a=fe(e,r,a,i):l=fe(e,r,l,i),this._root=at(l,a,i)},n.prototype.split=function(t){return Ne(t,this._root,this._comparator)},n.prototype[Symbol.iterator]=function(){var t;return lt(this,function(e){switch(e.label){case 0:t=this.minNode(),e.label=1;case 1:return t?[4,t]:[3,3];case 2:return e.sent(),t=this.next(t),[3,1];case 3:return[2]}})},n}();function ye(n,t,e,r){var i=r-e;if(i>0){var o=e+Math.floor(i/2),l=n[o],a=t[o],s=new V(l,a);return s.left=ye(n,t,e,o),s.right=ye(n,t,o+1,r),s}return null}function ut(n,t){for(var e=new V(null,null),r=e,i=0;i<n.length;i++)r=r.next=new V(n[i],t[i]);return r.next=null,e.next}function ht(n){for(var t=n,e=[],r=!1,i=new V(null,null),o=i;!r;)t?(e.push(t),t=t.left):e.length>0?(t=o=o.next=e.pop(),t=t.right):r=!0;return o.next=null,i.next}function de(n,t,e){var r=e-t;if(r>0){var i=t+Math.floor(r/2),o=de(n,t,i),l=n.head;return l.left=o,n.head=n.head.next,l.right=de(n,i+1,e),l}return null}function ft(n,t,e){for(var r=new V(null,null),i=r,o=n,l=t;o!==null&&l!==null;)e(o.key,l.key)<0?(i.next=o,o=o.next):(i.next=l,l=l.next),i=i.next;return o!==null?i.next=o:l!==null&&(i.next=l),r.next}function pe(n,t,e,r,i){if(!(e>=r)){for(var o=n[e+r>>1],l=e-1,a=r+1;;){do l++;while(i(n[l],o)<0);do a--;while(i(n[a],o)>0);if(l>=a)break;var s=n[l];n[l]=n[a],n[a]=s,s=t[l],t[l]=t[a],t[a]=s}pe(n,t,e,a,i),pe(n,t,a+1,r,i)}}function L(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function N(n,t,e){return t&&Ae(n.prototype,t),e&&Ae(n,e),n}var K=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},xe=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var r=t.ll.x<e.ll.x?e.ll.x:t.ll.x,i=t.ur.x<e.ur.x?t.ur.x:e.ur.x,o=t.ll.y<e.ll.y?e.ll.y:t.ll.y,l=t.ur.y<e.ur.y?t.ur.y:e.ur.y;return{ll:{x:r,y:o},ur:{x:i,y:l}}},Q=Number.EPSILON;Q===void 0&&(Q=Math.pow(2,-52));var ct=Q*Q,me=function(t,e){if(-Q<t&&t<Q&&-Q<e&&e<Q)return 0;var r=t-e;return r*r<ct*t*e?0:t<e?-1:1},vt=function(){function n(){L(this,n),this.reset()}return N(n,[{key:"reset",value:function(){this.xRounder=new Me,this.yRounder=new Me}},{key:"round",value:function(e,r){return{x:this.xRounder.round(e),y:this.yRounder.round(r)}}}]),n}(),Me=function(){function n(){L(this,n),this.tree=new we,this.round(0)}return N(n,[{key:"round",value:function(e){var r=this.tree.add(e),i=this.tree.prev(r);if(i!==null&&me(r.key,i.key)===0)return this.tree.remove(e),i.key;var o=this.tree.next(r);return o!==null&&me(r.key,o.key)===0?(this.tree.remove(e),o.key):e}}]),n}(),te=new vt,ee=function(t,e){return t.x*e.y-t.y*e.x},Ye=function(t,e){return t.x*e.x+t.y*e.y},Le=function(t,e,r){var i={x:e.x-t.x,y:e.y-t.y},o={x:r.x-t.x,y:r.y-t.y},l=ee(i,o);return me(l,0)},oe=function(t){return Math.sqrt(Ye(t,t))},gt=function(t,e,r){var i={x:e.x-t.x,y:e.y-t.y},o={x:r.x-t.x,y:r.y-t.y};return ee(o,i)/oe(o)/oe(i)},yt=function(t,e,r){var i={x:e.x-t.x,y:e.y-t.y},o={x:r.x-t.x,y:r.y-t.y};return Ye(o,i)/oe(o)/oe(i)},$e=function(t,e,r){return e.y===0?null:{x:t.x+e.x/e.y*(r-t.y),y:r}},Ce=function(t,e,r){return e.x===0?null:{x:r,y:t.y+e.y/e.x*(r-t.x)}},dt=function(t,e,r,i){if(e.x===0)return Ce(r,i,t.x);if(i.x===0)return Ce(t,e,r.x);if(e.y===0)return $e(r,i,t.y);if(i.y===0)return $e(t,e,r.y);var o=ee(e,i);if(o==0)return null;var l={x:r.x-t.x,y:r.y-t.y},a=ee(l,e)/o,s=ee(l,i)/o,u=t.x+s*e.x,h=r.x+a*i.x,g=t.y+s*e.y,f=r.y+a*i.y,c=(u+h)/2,y=(g+f)/2;return{x:c,y}},Y=function(){N(n,null,[{key:"compare",value:function(e,r){var i=n.comparePoints(e.point,r.point);return i!==0?i:(e.point!==r.point&&e.link(r),e.isLeft!==r.isLeft?e.isLeft?1:-1:le.compare(e.segment,r.segment))}},{key:"comparePoints",value:function(e,r){return e.x<r.x?-1:e.x>r.x?1:e.y<r.y?-1:e.y>r.y?1:0}}]);function n(t,e){L(this,n),t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=e}return N(n,[{key:"link",value:function(e){if(e.point===this.point)throw new Error("Tried to link already linked events");for(var r=e.point.events,i=0,o=r.length;i<o;i++){var l=r[i];this.point.events.push(l),l.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var e=this.point.events.length,r=0;r<e;r++){var i=this.point.events[r];if(i.segment.consumedBy===void 0)for(var o=r+1;o<e;o++){var l=this.point.events[o];l.consumedBy===void 0&&i.otherSE.point.events===l.otherSE.point.events&&i.segment.consume(l.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var e=[],r=0,i=this.point.events.length;r<i;r++){var o=this.point.events[r];o!==this&&!o.segment.ringOut&&o.segment.isInResult()&&e.push(o)}return e}},{key:"getLeftmostComparator",value:function(e){var r=this,i=new Map,o=function(a){var s=a.otherSE;i.set(a,{sine:gt(r.point,e.point,s.point),cosine:yt(r.point,e.point,s.point)})};return function(l,a){i.has(l)||o(l),i.has(a)||o(a);var s=i.get(l),u=s.sine,h=s.cosine,g=i.get(a),f=g.sine,c=g.cosine;return u>=0&&f>=0?h<c?1:h>c?-1:0:u<0&&f<0?h<c?-1:h>c?1:0:f<u?-1:f>u?1:0}}}]),n}(),pt=0,le=function(){N(n,null,[{key:"compare",value:function(e,r){var i=e.leftSE.point.x,o=r.leftSE.point.x,l=e.rightSE.point.x,a=r.rightSE.point.x;if(a<i)return 1;if(l<o)return-1;var s=e.leftSE.point.y,u=r.leftSE.point.y,h=e.rightSE.point.y,g=r.rightSE.point.y;if(i<o){if(u<s&&u<h)return 1;if(u>s&&u>h)return-1;var f=e.comparePoint(r.leftSE.point);if(f<0)return 1;if(f>0)return-1;var c=r.comparePoint(e.rightSE.point);return c!==0?c:-1}if(i>o){if(s<u&&s<g)return-1;if(s>u&&s>g)return 1;var y=r.comparePoint(e.leftSE.point);if(y!==0)return y;var v=e.comparePoint(r.rightSE.point);return v<0?1:v>0?-1:1}if(s<u)return-1;if(s>u)return 1;if(l<a){var x=r.comparePoint(e.rightSE.point);if(x!==0)return x}if(l>a){var b=e.comparePoint(r.rightSE.point);if(b<0)return 1;if(b>0)return-1}if(l!==a){var m=h-s,R=l-i,w=g-u,k=a-o;if(m>R&&w<k)return 1;if(m<R&&w>k)return-1}return l>a?1:l<a||h<g?-1:h>g?1:e.id<r.id?-1:e.id>r.id?1:0}}]);function n(t,e,r,i){L(this,n),this.id=++pt,this.leftSE=t,t.segment=this,t.otherSE=e,this.rightSE=e,e.segment=this,e.otherSE=t,this.rings=r,this.windings=i}return N(n,[{key:"replaceRightSE",value:function(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var e=this.leftSE.point.y,r=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e<r?e:r},ur:{x:this.rightSE.point.x,y:e>r?e:r}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(e){return e.x===this.leftSE.point.x&&e.y===this.leftSE.point.y||e.x===this.rightSE.point.x&&e.y===this.rightSE.point.y}},{key:"comparePoint",value:function(e){if(this.isAnEndpoint(e))return 0;var r=this.leftSE.point,i=this.rightSE.point,o=this.vector();if(r.x===i.x)return e.x===r.x?0:e.x<r.x?1:-1;var l=(e.y-r.y)/o.y,a=r.x+l*o.x;if(e.x===a)return 0;var s=(e.x-r.x)/o.x,u=r.y+s*o.y;return e.y===u?0:e.y<u?-1:1}},{key:"getIntersection",value:function(e){var r=this.bbox(),i=e.bbox(),o=xe(r,i);if(o===null)return null;var l=this.leftSE.point,a=this.rightSE.point,s=e.leftSE.point,u=e.rightSE.point,h=K(r,s)&&this.comparePoint(s)===0,g=K(i,l)&&e.comparePoint(l)===0,f=K(r,u)&&this.comparePoint(u)===0,c=K(i,a)&&e.comparePoint(a)===0;if(g&&h)return c&&!f?a:!c&&f?u:null;if(g)return f&&l.x===u.x&&l.y===u.y?null:l;if(h)return c&&a.x===s.x&&a.y===s.y?null:s;if(c&&f)return null;if(c)return a;if(f)return u;var y=dt(l,this.vector(),s,e.vector());return y===null||!K(o,y)?null:te.round(y.x,y.y)}},{key:"split",value:function(e){var r=[],i=e.events!==void 0,o=new Y(e,!0),l=new Y(e,!1),a=this.rightSE;this.replaceRightSE(l),r.push(l),r.push(o);var s=new n(o,a,this.rings.slice(),this.windings.slice());return Y.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),Y.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(o.checkForConsuming(),l.checkForConsuming()),r}},{key:"swapEvents",value:function(){var e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var r=0,i=this.windings.length;r<i;r++)this.windings[r]*=-1}},{key:"consume",value:function(e){for(var r=this,i=e;r.consumedBy;)r=r.consumedBy;for(;i.consumedBy;)i=i.consumedBy;var o=n.compare(r,i);if(o!==0){if(o>0){var l=r;r=i,i=l}if(r.prev===i){var a=r;r=i,i=a}for(var s=0,u=i.rings.length;s<u;s++){var h=i.rings[s],g=i.windings[s],f=r.rings.indexOf(h);f===-1?(r.rings.push(h),r.windings.push(g)):r.windings[f]+=g}i.rings=null,i.windings=null,i.consumedBy=r,i.leftSE.consumedBy=r.leftSE,i.rightSE.consumedBy=r.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};for(var r=this._afterState.rings,i=this._afterState.windings,o=this._afterState.multiPolys,l=0,a=this.rings.length;l<a;l++){var s=this.rings[l],u=this.windings[l],h=r.indexOf(s);h===-1?(r.push(s),i.push(u)):i[h]+=u}for(var g=[],f=[],c=0,y=r.length;c<y;c++)if(i[c]!==0){var v=r[c],x=v.poly;if(f.indexOf(x)===-1)if(v.isExterior)g.push(x);else{f.indexOf(x)===-1&&f.push(x);var b=g.indexOf(v.poly);b!==-1&&g.splice(b,1)}}for(var m=0,R=g.length;m<R;m++){var w=g[m].multiPoly;o.indexOf(w)===-1&&o.push(w)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var e=this.beforeState().multiPolys,r=this.afterState().multiPolys;switch(G.type){case"union":{var i=e.length===0,o=r.length===0;this._isInResult=i!==o;break}case"intersection":{var l,a;e.length<r.length?(l=e.length,a=r.length):(l=r.length,a=e.length),this._isInResult=a===G.numMultiPolys&&l<a;break}case"xor":{var s=Math.abs(e.length-r.length);this._isInResult=s%2===1;break}case"difference":{var u=function(g){return g.length===1&&g[0].isSubject};this._isInResult=u(e)!==u(r);break}default:throw new Error("Unrecognized operation type found ".concat(G.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,r,i){var o,l,a,s=Y.comparePoints(e,r);if(s<0)o=e,l=r,a=1;else if(s>0)o=r,l=e,a=-1;else throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));var u=new Y(o,!0),h=new Y(l,!1);return new n(u,h,[i],[a])}}]),n}(),Te=function(){function n(t,e,r){if(L(this,n),!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=r,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=te.round(t[0][0],t[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,l=1,a=t.length;l<a;l++){if(typeof t[l][0]!="number"||typeof t[l][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var s=te.round(t[l][0],t[l][1]);s.x===o.x&&s.y===o.y||(this.segments.push(le.fromRing(o,s,this)),s.x<this.bbox.ll.x&&(this.bbox.ll.x=s.x),s.y<this.bbox.ll.y&&(this.bbox.ll.y=s.y),s.x>this.bbox.ur.x&&(this.bbox.ur.x=s.x),s.y>this.bbox.ur.y&&(this.bbox.ur.y=s.y),o=s)}(i.x!==o.x||i.y!==o.y)&&this.segments.push(le.fromRing(o,i,this))}return N(n,[{key:"getSweepEvents",value:function(){for(var e=[],r=0,i=this.segments.length;r<i;r++){var o=this.segments[r];e.push(o.leftSE),e.push(o.rightSE)}return e}}]),n}(),xt=function(){function n(t,e){if(L(this,n),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Te(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,i=t.length;r<i;r++){var o=new Te(t[r],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=e}return N(n,[{key:"getSweepEvents",value:function(){for(var e=this.exteriorRing.getSweepEvents(),r=0,i=this.interiorRings.length;r<i;r++)for(var o=this.interiorRings[r].getSweepEvents(),l=0,a=o.length;l<a;l++)e.push(o[l]);return e}}]),n}(),ze=function(){function n(t,e){if(L(this,n),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,i=t.length;r<i;r++){var o=new xt(t[r],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=e}return N(n,[{key:"getSweepEvents",value:function(){for(var e=[],r=0,i=this.polys.length;r<i;r++)for(var o=this.polys[r].getSweepEvents(),l=0,a=o.length;l<a;l++)e.push(o[l]);return e}}]),n}(),mt=function(){N(n,null,[{key:"factory",value:function(e){for(var r=[],i=0,o=e.length;i<o;i++){var l=e[i];if(!(!l.isInResult()||l.ringOut)){for(var a=null,s=l.leftSE,u=l.rightSE,h=[s],g=s.point,f=[];a=s,s=u,h.push(s),s.point!==g;)for(;;){var c=s.getAvailableLinkedEvents();if(c.length===0){var y=h[0].point,v=h[h.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(y.x,",")+" ".concat(y.y,"]. Last matching segment found ends at")+" [".concat(v.x,", ").concat(v.y,"]."))}if(c.length===1){u=c[0].otherSE;break}for(var x=null,b=0,m=f.length;b<m;b++)if(f[b].point===s.point){x=b;break}if(x!==null){var R=f.splice(x)[0],w=h.splice(R.index);w.unshift(w[0].otherSE),r.push(new n(w.reverse()));continue}f.push({index:h.length,point:s.point});var k=s.getLeftmostComparator(a);u=c.sort(k)[0].otherSE;break}r.push(new n(h))}}return r}}]);function n(t){L(this,n),this.events=t;for(var e=0,r=t.length;e<r;e++)t[e].segment.ringOut=this;this.poly=null}return N(n,[{key:"getGeom",value:function(){for(var e=this.events[0].point,r=[e],i=1,o=this.events.length-1;i<o;i++){var l=this.events[i].point,a=this.events[i+1].point;Le(l,e,a)!==0&&(r.push(l),e=l)}if(r.length===1)return null;var s=r[0],u=r[1];Le(s,e,u)===0&&r.shift(),r.push(r[0]);for(var h=this.isExteriorRing()?1:-1,g=this.isExteriorRing()?0:r.length-1,f=this.isExteriorRing()?r.length:-1,c=[],y=g;y!=f;y+=h)c.push([r[y].x,r[y].y]);return c}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var e=this.events[0],r=1,i=this.events.length;r<i;r++){var o=this.events[r];Y.compare(e,o)>0&&(e=o)}for(var l=e.segment.prevInResult(),a=l?l.prevInResult():null;;){if(!l)return null;if(!a)return l.ringOut;if(a.ringOut!==l.ringOut)return a.ringOut.enclosingRing()!==l.ringOut?l.ringOut:l.ringOut.enclosingRing();l=a.prevInResult(),a=l?l.prevInResult():null}}}]),n}(),Be=function(){function n(t){L(this,n),this.exteriorRing=t,t.poly=this,this.interiorRings=[]}return N(n,[{key:"addInterior",value:function(e){this.interiorRings.push(e),e.poly=this}},{key:"getGeom",value:function(){var e=[this.exteriorRing.getGeom()];if(e[0]===null)return null;for(var r=0,i=this.interiorRings.length;r<i;r++){var o=this.interiorRings[r].getGeom();o!==null&&e.push(o)}return e}}]),n}(),Et=function(){function n(t){L(this,n),this.rings=t,this.polys=this._composePolys(t)}return N(n,[{key:"getGeom",value:function(){for(var e=[],r=0,i=this.polys.length;r<i;r++){var o=this.polys[r].getGeom();o!==null&&e.push(o)}return e}},{key:"_composePolys",value:function(e){for(var r=[],i=0,o=e.length;i<o;i++){var l=e[i];if(!l.poly)if(l.isExteriorRing())r.push(new Be(l));else{var a=l.enclosingRing();a.poly||r.push(new Be(a)),a.poly.addInterior(l)}}return r}}]),n}(),wt=function(){function n(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:le.compare;L(this,n),this.queue=t,this.tree=new we(e),this.segments=[]}return N(n,[{key:"process",value:function(e){var r=e.segment,i=[];if(e.consumedBy)return e.isLeft?this.queue.remove(e.otherSE):this.tree.remove(r),i;var o=e.isLeft?this.tree.insert(r):this.tree.find(r);if(!o)throw new Error("Unable to find segment #".concat(r.id," ")+"[".concat(r.leftSE.point.x,", ").concat(r.leftSE.point.y,"] -> ")+"[".concat(r.rightSE.point.x,", ").concat(r.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var l=o,a=o,s=void 0,u=void 0;s===void 0;)l=this.tree.prev(l),l===null?s=null:l.key.consumedBy===void 0&&(s=l.key);for(;u===void 0;)a=this.tree.next(a),a===null?u=null:a.key.consumedBy===void 0&&(u=a.key);if(e.isLeft){var h=null;if(s){var g=s.getIntersection(r);if(g!==null&&(r.isAnEndpoint(g)||(h=g),!s.isAnEndpoint(g)))for(var f=this._splitSafely(s,g),c=0,y=f.length;c<y;c++)i.push(f[c])}var v=null;if(u){var x=u.getIntersection(r);if(x!==null&&(r.isAnEndpoint(x)||(v=x),!u.isAnEndpoint(x)))for(var b=this._splitSafely(u,x),m=0,R=b.length;m<R;m++)i.push(b[m])}if(h!==null||v!==null){var w=null;if(h===null)w=v;else if(v===null)w=h;else{var k=Y.comparePoints(h,v);w=k<=0?h:v}this.queue.remove(r.rightSE),i.push(r.rightSE);for(var d=r.split(w),O=0,D=d.length;O<D;O++)i.push(d[O])}i.length>0?(this.tree.remove(r),i.push(e)):(this.segments.push(r),r.prev=s)}else{if(s&&u){var P=s.getIntersection(u);if(P!==null){if(!s.isAnEndpoint(P))for(var $=this._splitSafely(s,P),C=0,j=$.length;C<j;C++)i.push($[C]);if(!u.isAnEndpoint(P))for(var T=this._splitSafely(u,P),F=0,A=T.length;F<A;F++)i.push(T[F])}}this.tree.remove(r)}return i}},{key:"_splitSafely",value:function(e,r){this.tree.remove(e);var i=e.rightSE;this.queue.remove(i);var o=e.split(r);return o.push(i),e.consumedBy===void 0&&this.tree.insert(e),o}}]),n}(),Ge=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,bt=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,St=function(){function n(){L(this,n)}return N(n,[{key:"run",value:function(e,r,i){G.type=e,te.reset();for(var o=[new ze(r,!0)],l=0,a=i.length;l<a;l++)o.push(new ze(i[l],!1));if(G.numMultiPolys=o.length,G.type==="difference")for(var s=o[0],u=1;u<o.length;)xe(o[u].bbox,s.bbox)!==null?u++:o.splice(u,1);if(G.type==="intersection"){for(var h=0,g=o.length;h<g;h++)for(var f=o[h],c=h+1,y=o.length;c<y;c++)if(xe(f.bbox,o[c].bbox)===null)return[]}for(var v=new we(Y.compare),x=0,b=o.length;x<b;x++)for(var m=o[x].getSweepEvents(),R=0,w=m.length;R<w;R++)if(v.insert(m[R]),v.size>Ge)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var k=new wt(v),d=v.size,O=v.pop();O;){var D=O.key;if(v.size===d){var P=D.segment;throw new Error("Unable to pop() ".concat(D.isLeft?"left":"right"," SweepEvent ")+"[".concat(D.point.x,", ").concat(D.point.y,"] from segment #").concat(P.id," ")+"[".concat(P.leftSE.point.x,", ").concat(P.leftSE.point.y,"] -> ")+"[".concat(P.rightSE.point.x,", ").concat(P.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(v.size>Ge)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(k.segments.length>bt)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var $=k.process(D),C=0,j=$.length;C<j;C++){var T=$[C];T.consumedBy===void 0&&v.insert(T)}d=v.size,O=v.pop()}te.reset();var F=mt.factory(k.segments),A=new Et(F);return A.getGeom()}}]),n}(),G=new St,kt=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return G.run("union",t,r)},Rt=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return G.run("intersection",t,r)},Pt=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return G.run("xor",t,r)},_t=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return G.run("difference",t,r)},It={union:kt,intersection:Rt,xor:Pt,difference:_t};const ie=n=>Math.round(n*1e10)/1e10,ce=(n,t)=>ie(Math.sqrt((t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y))),se=Math.PI,Ot=se*2,Nt=(n,t)=>{const e=t-n;return e>se&&e<Ot||e<0&&e>-se?-1:1},At=(n,t,e,r,i,o)=>{const l=Math.atan2(n.y-t.y,n.x-t.x),a=Math.atan2(e.y-t.y,e.x-t.x),s=Math.acos((r*r+o*o-i*i)/(2*r*o)),u=1/Math.tan(s/2),h=Nt(l,a),g=l+h*s/2;return{prev:l,next:a,main:s,vel:u,dir:h,bis:g}},Mt=(n,t=0)=>{const e=n.length,r=[],i=[],o=[];n.forEach((s,u)=>{const h=n[(u-1+e)%e],g=n[(u+1)%e],f=ce(h,s),c=ce(h,g),y=ce(s,g),v=At(h,s,g,f,c,y);v.main===0&&(v.main=Number.EPSILON,v.vel=Number.MAX_SAFE_INTEGER),v.main===se&&(v.vel=0);const x={x:s.x,y:s.y,angle:v,offset:0,arc:{radius:t,hit:t,lim:Math.min(y/v.vel,f/v.vel,s.r||0)},in:{length:f,rest:f},out:{length:y,rest:y},locked:!1,id:u,get prev(){return r[(u-1+e)%e]},get next(){return r[(u+1)%e]}};isNaN(v.main)&&(v.main=0,v.bis=v.prev||v.next,o.push(x)),typeof s.r=="number"&&(s.r===0?o.push(x):i.push(x)),r.push(x)}),o.forEach(s=>{s.angle.vel=0,s.arc.radius=0,be(s)}),r.forEach(s=>{s.arc.hit=Math.min(s.out.rest/(s.angle.vel+s.next.angle.vel),s.in.rest/(s.angle.vel+s.prev.angle.vel))});let l=ne(i);for(;l;)Lt(l),l=ne(i);for(l=ne(r);l;)$t(l,t),l=ne(r);const a=r.map(s=>{const u=s.arc.radius/Math.sin(s.angle.main/2);return{id:s.id,x:s.x,y:s.y,angle:{main:ie(s.angle.main),prev:s.angle.prev,next:s.angle.next,bis:s.angle.bis,dir:s.angle.dir},offset:ie(s.offset),arc:{radius:ie(s.arc.radius),x:s.x+(Math.cos(s.angle.bis)*u||0),y:s.y+(Math.sin(s.angle.bis)*u||0)},in:{length:s.in.length,x:s.x+Math.cos(s.angle.prev)*s.offset,y:s.y+Math.sin(s.angle.prev)*s.offset},out:{length:s.out.length,x:s.x+Math.cos(s.angle.next)*s.offset,y:s.y+Math.sin(s.angle.next)*s.offset},get prev(){return a[(s.id-1+e)%e]},get next(){return a[(s.id+1)%e]}}});return a},Lt=n=>{const{prev:t,next:e}=n;t.locked&&!e.locked?n.arc.radius=Math.min(Math.max((n.out.length-e.arc.lim*e.angle.vel)/n.angle.vel,n.out.length/(n.angle.vel+e.angle.vel)),n.in.rest/n.angle.vel,n.arc.lim):e.locked&&!t.locked?n.arc.radius=Math.min(Math.max((n.in.length-t.arc.lim*t.angle.vel)/n.angle.vel,n.in.length/(n.angle.vel+t.angle.vel)),n.out.rest/n.angle.vel,n.arc.lim):e.locked&&t.locked?n.arc.radius=Math.min(n.in.rest/n.angle.vel,n.out.rest/n.angle.vel,n.arc.lim):n.arc.radius=Math.min(Math.max((n.in.length-t.arc.lim*t.angle.vel)/n.angle.vel,n.in.length/(n.angle.vel+t.angle.vel)),Math.max((n.out.length-e.arc.lim*e.angle.vel)/n.angle.vel,n.out.length/(n.angle.vel+e.angle.vel)),n.arc.lim),be(n)},$t=(n,t)=>{if(t>n.arc.hit){const{prev:e,next:r}=n;e.locked&&!r.locked?n.arc.radius=Math.max(Math.min(n.in.rest/n.angle.vel,n.out.length/(n.angle.vel+r.angle.vel),n.arc.radius),0):r.locked&&!e.locked?n.arc.radius=Math.max(Math.min(n.out.rest/n.angle.vel,n.in.length/(n.angle.vel+e.angle.vel),n.arc.radius),0):r.locked&&e.locked?n.arc.radius=Math.max(Math.min(n.in.rest/n.angle.vel,n.out.rest/n.angle.vel,n.arc.radius),0):n.arc.radius=n.arc.hit}be(n)},be=n=>{const{prev:t,next:e}=n;n.offset=n.arc.radius*n.angle.vel,t.out.rest-=n.offset,n.in.rest-=n.offset,n.out.rest-=n.offset,e.in.rest-=n.offset,n.locked=!0,t.arc.hit=Math.min(t.in.length/(t.angle.vel+t.prev.angle.vel),t.in.rest/t.angle.vel,t.out.rest/t.angle.vel),e.arc.hit=Math.min(e.out.length/(e.angle.vel+e.next.angle.vel),e.out.rest/e.angle.vel,e.in.rest/e.angle.vel)},ne=n=>n.reduce((t,e)=>e.locked?t:t?e.arc.hit<t.arc.hit?e:t:e,null);const Ct=({children:n,width:t,spaceWidth:e=48,cloudHeight:r=32,padding:i=10,align:o="left",mode:l="WORD",snap:a=0,grid:s=!1,fill:u="White",stroke:h="DodgerBlue",strokeWidth:g=2,shadowOffsetX:f=-3,shadowOffsetY:c=5,shadowColor:y=h,font:v={color:h,size:16,family:"sans-serif",style:"none",variant:"none",weight:"none"}})=>{const x=H(null),b=H([]),m=H([]),R=H([]),w=H(n),k=a?r/a:1;w.current!==n&&(b.current.length=0,m.current.length=0,R.current.length=0,w.current=n);const d=H(null),O=H(null);Pe(()=>{O.current=d.current.getContext("2d"),O.current.lineJoin="round"},[]),Pe(()=>{if(m.current.forEach(_=>_.style.width=""),b.current.forEach(_=>_.style.left=""),a&&(m.current.forEach(_=>{let{width:I}=_.getBoundingClientRect();I=Math.ceil(I/k)*k,_.style.width=`${I}px`}),o==="center")){const{top:_,left:I}=x.current.getBoundingClientRect();let z=NaN,J=NaN;b.current.forEach(Z=>{let{x:Re,y:he}=Z.getBoundingClientRect();Re-=I,he-=_,he!==z&&(z=he,J=-(Re%k/k)*k),Z.style.left=`${J}px`})}const{height:P,top:$,left:C}=x.current.getBoundingClientRect(),T=(l==="WORD"||l==="PARTIAL"?m.current.filter(_=>!_.idle):R.current).map(_=>{let{x:I,y:z,width:J,height:Z}=_.getBoundingClientRect();return I-=C,z-=$,[[[I,z],[I+J,z],[I+J,z+Z],[I,z+Z]]]}),F=T.length?It.union(...T).map(_=>_.map(I=>(I.pop(),I.map(z=>({x:z[0],y:z[1]}))))).map(_=>_.map(I=>Mt(I,r/(a===1?2:4)))):[],A=window.devicePixelRatio,M=O.current,U=d.current,S=g,W=f,q=c,Se=t+(Math.abs(W)>S/2?Math.abs(W)+S/2:S),ke=P+(Math.abs(q)>S/2?Math.abs(q)+S/2:S);U.width=Se*A,U.height=ke*A,U.style.width=`${Se}px`,U.style.height=`${ke}px`,U.style.top=`${q<0&&-q>S/2?q:-S/2}px`,U.style.left=`${W<0&&-W>S/2?W:-S/2}px`,M.clearRect(0,0,U.width,U.height),S>0?M.lineWidth=S*A:M.strokeStyle="transparent";const Fe=q<0&&-q>S/2?-q:S/2,Ue=W<0&&-W>S/2?-W:S/2;M.fillStyle=y,S>0&&(M.strokeStyle=y),M.translate((Ue+W)*A,(Fe+q)*A),Oe(M,F,A),M.fillStyle=u,S>0&&(M.strokeStyle=h),M.translate(-W*A,-q*A),Oe(M,F,A),a&&s&&ot(M,t,P,o,a,T),M.setTransform(1,0,0,1,0,0)});const D=it(l);return typeof n=="string"?n=Ie(n,l).map(D):Array.isArray(n)&&(n=n.reduce((P,$,C)=>(typeof $=="string"?Ie($,l).forEach((j,T)=>P.push(D(j,`${C}-${T}`))):P.push($),P),[])),E("p",{ref:x,className:"cloud-letter",style:{width:`${t}px`,"--gap":`${a?Math.ceil(e/k)*k:e}px`,"--height":`${r}px`,"--padding":`0 ${i}px`,"--padding-idle":`0 ${l==="PARTIAL"?0:i}px`,"--margin-partial":`0 ${l==="PARTIAL"&&a===0?v.size/4:0}px`,"--align":o,"--color":v.color,"--font-size":`${v.size}px`,"--font-family":v.family,"--font-style":v.style,"--font-variant":v.variant,"--font-weight":v.weight},children:[p(Ee.Provider,{value:{every:b.current,words:m.current,spaces:R.current},children:n}),p("canvas",{ref:d,className:"cloud-canvas"})]})},De=window.innerWidth,Tt='The ${origin} of the term ${"cloud"} can be ${found} in ${the Old English} words clud or clod, meaning a hill or a mass of stone.',zt=()=>{const[n,t]=B(Tt),[e,r]=B("PARTIAL"),[i,o]=B("center"),[l,a]=B(8),[s,u]=B(33),[h,g]=B(16),[f,c]=B(0),[y,v]=B(!1),[x,b]=B("#ffffff"),[m,R]=B("#1e90ff"),[w,k]=B({x:-3,y:5});return E(rt,{children:[p(Ct,{width:Math.min(De*.8,512),spaceWidth:l,cloudHeight:s,font:{color:m,family:"Verdana",size:16},padding:h,align:i,mode:e,snap:f,grid:y,fill:x,stroke:m,shadowOffsetX:w.x,shadowOffsetY:w.y,children:n}),E("form",{className:"controls",children:[E("fieldset",{className:"controls-row content",children:[p("span",{children:"content:"}),p("textarea",{rows:3,cols:Math.min(Math.max(42,De/25|0),55),value:n,onInput:d=>t(d.target.value)})]}),E("fieldset",{className:"controls-row view",children:[p("span",{children:"view:"}),E("label",{children:["fill",p("div",{className:"hidder",children:p("input",{type:"color",value:x,onChange:d=>b(d.target.value)})})]}),E("label",{children:["stroke",p("div",{className:"hidder",children:p("input",{type:"color",value:m,onChange:d=>R(d.target.value)})})]}),p("span",{className:"shadow-label",children:"shadow:"}),E("label",{children:["x",p("input",{type:"number",value:w.x,min:-20,max:20,onChange:d=>k(O=>({x:+d.target.value,y:O.y}))})]}),E("label",{children:["y",p("input",{type:"number",value:w.y,min:-20,max:20,onChange:d=>k(O=>({y:+d.target.value,x:O.x}))})]})]}),E("fieldset",{className:"controls-row mode",children:[p("span",{children:"mode:"}),E("label",{children:[p("input",{type:"radio",name:"mode",value:"WORD",checked:e==="WORD",onChange:d=>r(d.target.value)}),"WORD"]}),E("label",{children:[p("input",{type:"radio",name:"mode",value:"PARTIAL",checked:e==="PARTIAL",onChange:d=>r(d.target.value)}),"PARTIAL"]}),E("label",{children:[p("input",{type:"radio",name:"mode",value:"SPACE",checked:e==="SPACE",onChange:d=>r(d.target.value)}),"SPACE"]})]}),E("fieldset",{className:"controls-row align",children:[p("span",{children:"align:"}),E("label",{children:[p("input",{type:"radio",name:"align",value:"left",checked:i==="left",onChange:d=>o(d.target.value)}),"left"]}),E("label",{children:[p("input",{type:"radio",name:"align",value:"center",checked:i==="center",onChange:d=>o(d.target.value)}),"center"]}),E("label",{children:[p("input",{type:"radio",name:"align",value:"right",checked:i==="right",onChange:d=>o(d.target.value)}),"right"]})]}),E("fieldset",{className:"controls-row clouds",children:[p("span",{children:"cloud's:"}),E("div",{children:[E("label",{children:["height",p("input",{type:"range",min:20,max:50,step:1,value:s,onInput:d=>u(+d.target.value)})]}),E("label",{children:["width",p("input",{type:"range",min:0,max:50,step:1,value:h,onInput:d=>g(+d.target.value)})]}),E("label",{children:["space between",p("input",{type:"range",min:0,max:100,step:1,value:l,onInput:d=>a(+d.target.value)})]})]})]}),E("fieldset",{className:"controls-row snap",children:[p("span",{children:"snap: "}),E("label",{className:"snap",children:["cloudHeight  /",p("input",{type:"number",value:f,onChange:d=>c(+d.target.value)})]}),E("label",{className:"grid",children:[p("span",{style:{color:f?"black":"grey"},children:", grid"}),p("input",{type:"checkbox",disabled:!f,checked:y,onChange:()=>v(d=>!d)})]})]})]}),p("a",{className:"repo-link",href:"https://github.com/foretoo/cloud-letter",children:"github repo"})]})};const Bt=ve.createRoot(document.getElementById("root"));Bt.render(p(zt,{}));
